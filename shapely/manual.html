<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The Shapely User Manual &mdash; Shapely 1.2 and 1.3 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Shapely 1.2 and 1.3 documentation" href="index.html" />
    <link rel="next" title="shapely" href="modules.html" />
    <link rel="prev" title="Shapely" href="project.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="modules.html" title="shapely"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="project.html" title="Shapely"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Shapely 1.2 and 1.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The Shapely User Manual</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#spatial-data-model">Spatial Data Model</a></li>
<li><a class="reference internal" href="#relationships">Relationships</a></li>
<li><a class="reference internal" href="#operations">Operations</a></li>
<li><a class="reference internal" href="#coordinate-systems">Coordinate Systems</a></li>
</ul>
</li>
<li><a class="reference internal" href="#geometric-objects">Geometric Objects</a><ul>
<li><a class="reference internal" href="#general-attributes-and-methods">General Attributes and Methods</a></li>
<li><a class="reference internal" href="#points">Points</a></li>
<li><a class="reference internal" href="#linestrings">LineStrings</a></li>
<li><a class="reference internal" href="#linearrings">LinearRings</a></li>
<li><a class="reference internal" href="#polygons">Polygons</a></li>
<li><a class="reference internal" href="#collections">Collections</a></li>
<li><a class="reference internal" href="#collections-of-points">Collections of Points</a></li>
<li><a class="reference internal" href="#collections-of-lines">Collections of Lines</a></li>
<li><a class="reference internal" href="#collections-of-polygons">Collections of Polygons</a></li>
<li><a class="reference internal" href="#empty-features">Empty features</a></li>
<li><a class="reference internal" href="#linear-referencing-methods">Linear Referencing Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#predicates-and-relationships">Predicates and Relationships</a><ul>
<li><a class="reference internal" href="#unary-predicates">Unary Predicates</a></li>
<li><a class="reference internal" href="#binary-predicates">Binary Predicates</a></li>
<li><a class="reference internal" href="#de-9im-relationships">DE-9IM Relationships</a></li>
</ul>
</li>
<li><a class="reference internal" href="#spatial-analysis-methods">Spatial Analysis Methods</a><ul>
<li><a class="reference internal" href="#set-theoretic-methods">Set-theoretic Methods</a></li>
<li><a class="reference internal" href="#constructive-methods">Constructive Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#affine-transformations">Affine Transformations</a></li>
<li><a class="reference internal" href="#other-transformations">Other Transformations</a></li>
<li><a class="reference internal" href="#other-operations">Other Operations</a><ul>
<li><a class="reference internal" href="#merging-linear-features">Merging Linear Features</a></li>
<li><a class="reference internal" href="#cascading-unions">Cascading Unions</a></li>
<li><a class="reference internal" href="#prepared-geometry-operations">Prepared Geometry Operations</a></li>
<li><a class="reference internal" href="#diagnostics">Diagnostics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#interoperation">Interoperation</a><ul>
<li><a class="reference internal" href="#well-known-formats">Well-Known Formats</a></li>
<li><a class="reference internal" href="#numpy-and-python-arrays">Numpy and Python Arrays</a></li>
<li><a class="reference internal" href="#python-geo-interface">Python Geo Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#performance">Performance</a></li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="project.html"
                        title="previous chapter">Shapely</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="modules.html"
                        title="next chapter">shapely</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/manual.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="the-shapely-user-manual">
<span id="manual"></span><h1>The Shapely User Manual<a class="headerlink" href="#the-shapely-user-manual" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Sean Gillies, &lt;<a class="reference external" href="mailto:sean&#46;gillies&#37;&#52;&#48;gmail&#46;com">sean<span>&#46;</span>gillies<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</td>
</tr>
<tr class="field-even field"><th class="field-name">Version:</th><td class="field-body">1.2 and 1.3</td>
</tr>
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">December 31, 2013</td>
</tr>
<tr class="field-even field"><th class="field-name">Copyright:</th><td class="field-body">This work is licensed under a <a class="reference external" href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution 3.0
United States License</a>.</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Abstract:</th><td class="field-body">This document explains how to use the Shapely Python package for
computational geometry.</td>
</tr>
</tbody>
</table>
<div class="section" id="introduction">
<span id="intro"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Deterministic spatial analysis is an important component of computational
approaches to problems in agriculture, ecology, epidemiology, sociology, and
many other fields. What is the surveyed perimeter/area ratio of these patches
of animal habitat? Which properties in this town intersect with the 50-year
flood contour from this new flooding model? What are the extents of findspots
for ancient ceramic wares with maker&#8217;s marks &#8220;A&#8221; and &#8220;B&#8221;, and where do the
extents overlap? What&#8217;s the path from home to office that best skirts
identified zones of location based spam? These are just a few of the possible
questions addressable using non-statistical spatial analysis, and more
specifically, computational geometry.</p>
<p>Shapely is a Python package for set-theoretic analysis and manipulation of
planar features using (via Python&#8217;s <tt class="xref py py-mod docutils literal"><span class="pre">ctypes</span></tt> module) functions from the
well known and widely deployed <a class="reference external" href="http://trac.osgeo.org/geos/">GEOS</a> library. GEOS, a port of the <a class="reference external" href="http://www.vividsolutions.com/jts/jtshome.htm">Java
Topology Suite</a> (JTS), is the geometry engine of the <a class="reference external" href="http://postgis.refractions.net">PostGIS</a> spatial
extension for the PostgreSQL RDBMS. The designs of JTS and GEOS are largely
guided by the <a class="reference external" href="http://www.opengeospatial.org/">Open Geospatial Consortium</a>&#8216;s Simple Features Access
Specification <a class="footnote-reference" href="#id22" id="id2">[1]</a> and Shapely adheres mainly to the same set of standard
classes and operations. Shapely is thereby deeply rooted in the conventions of
the geographic information systems (GIS) world, but aspires to be equally
useful to programmers working on non-conventional problems.</p>
<p>The first premise of Shapely is that Python programmers should be able to
perform PostGIS type geometry operations outside of an RDBMS. Not all
geographic data originate or reside in a RDBMS or are best processed using SQL.
We can load data into a spatial RDBMS to do work, but if there&#8217;s no mandate to
manage (the &#8220;M&#8221; in &#8220;RDBMS&#8221;) the data over time in the database we&#8217;re using the
wrong tool for the job. The second premise is that the persistence,
serialization, and map projection of features are significant, but orthogonal
problems. You may not need a hundred GIS format readers and writers or the
multitude of State Plane projections, and Shapely doesn&#8217;t burden you with them.
The third premise is that Python idioms trump GIS (or Java, in this case, since
the GEOS library is derived from JTS, a Java project) idioms.</p>
<p>If you enjoy and profit from idiomatic Python, appreciate packages that do one
thing well, and agree that a spatially enabled RDBMS is often enough the wrong
tool for your computational geometry job, Shapely might be for you.</p>
<div class="section" id="spatial-data-model">
<span id="intro-spatial-data-model"></span><h3>Spatial Data Model<a class="headerlink" href="#spatial-data-model" title="Permalink to this headline">¶</a></h3>
<p>The fundamental types of geometric objects implemented by Shapely are points,
curves, and surfaces. Each is associated with three sets of (possibly infinite)
points in the plane. The <cite>interior</cite>, <cite>boundary</cite>, and <cite>exterior</cite> sets of a
feature are mutually exclusive and their union coincides with the entire plane
<a class="footnote-reference" href="#id23" id="id3">[2]</a>.</p>
<ul class="simple">
<li>A <cite>Point</cite> has an <cite>interior</cite> set of exactly one point, a <cite>boundary</cite> set of
exactly no points, and an <cite>exterior</cite> set of all other points. A <cite>Point</cite> has
a topological dimension of 0.</li>
<li>A <cite>Curve</cite> has an <cite>interior</cite> set consisting of the infinitely many points
along its length (imagine a <cite>Point</cite> dragged in space), a <cite>boundary</cite> set
consisting of its two end points, and an <cite>exterior</cite> set of all other points.
A <cite>Curve</cite> has a topological dimension of 1.</li>
<li>A <cite>Surface</cite> has an <cite>interior</cite> set consisting of the infinitely many points
within (imagine a <cite>Curve</cite> dragged in space to cover an area), a <cite>boundary</cite>
set consisting of one or more <cite>Curves</cite>, and an <cite>exterior</cite> set of all other
points including those within holes that might exist in the surface. A
<cite>Surface</cite> has a topological dimension of 2.</li>
</ul>
<p>That may seem a bit esoteric, but will help clarify the meanings of Shapely&#8217;s
spatial predicates, and it&#8217;s as deep into theory as this manual will go.
Consequences of point-set theory, including some that manifest themselves as
&#8220;gotchas&#8221;, for different classes will be discussed later in this manual.</p>
<p>The point type is implemented by a <cite>Point</cite> class; curve by the <cite>LineString</cite> and
<cite>LinearRing</cite> classes; and surface by a <cite>Polygon</cite> class. Shapely implements no
smooth (<cite>i.e.</cite> having continuous tangents) curves. All curves must be
approximated by linear splines. All rounded patches must be approximated by
regions bounded by linear splines.</p>
<p>Collections of points are implemented by a <cite>MultiPoint</cite> class, collections of
curves by a <cite>MultiLineString</cite> class, and collections of surfaces by a
<cite>MultiPolygon</cite> class. These collections aren&#8217;t computationally significant, but
are useful for modeling certain kinds of features. A Y-shaped line feature, for
example, is well modeled as a whole by a <cite>MultiLineString</cite>.</p>
<p>The standard data model has additional constraints specific to certain types
of geometric objects that will be discussed in following sections of this
manual.</p>
<p>See also <a class="reference external" href="http://www.vividsolutions.com/jts/discussion.htm#spatialDataModel">http://www.vividsolutions.com/jts/discussion.htm#spatialDataModel</a>
for more illustrations of this data model.</p>
</div>
<div class="section" id="relationships">
<span id="intro-relationships"></span><h3>Relationships<a class="headerlink" href="#relationships" title="Permalink to this headline">¶</a></h3>
<p>The spatial data model is accompanied by a group of natural language
relationships between geometric objects – <cite>contains</cite>, <cite>intersects</cite>, <cite>overlaps</cite>,
<cite>touches</cite>, etc. – and a theoretical framework for understanding them using the
3x3 matrix of the mutual intersections of their component point sets <a class="footnote-reference" href="#id23" id="id4">[2]</a>: the
DE-9IM. A comprehensive review of the relationships in terms of the DE-9IM is
found in <a class="footnote-reference" href="#id25" id="id5">[4]</a> and will not be reiterated in this manual.</p>
</div>
<div class="section" id="operations">
<span id="intro-operations"></span><h3>Operations<a class="headerlink" href="#operations" title="Permalink to this headline">¶</a></h3>
<p>Following the JTS technical specs <a class="footnote-reference" href="#id26" id="id6">[5]</a>, this manual will make a distinction
between constructive (<cite>buffer</cite>, <cite>convex hull</cite>) and set-theoretic operations
(<cite>intersection</cite>, <cite>union</cite>, etc.). The individual operations will be fully
described in a following section of the manual.</p>
</div>
<div class="section" id="coordinate-systems">
<span id="intro-coordinate-systems"></span><h3>Coordinate Systems<a class="headerlink" href="#coordinate-systems" title="Permalink to this headline">¶</a></h3>
<p>Even though the Earth is not flat –&nbsp;and for that matter not exactly spherical –
there are many analytic problems that can be approached by transforming Earth
features to a Cartesian plane, applying tried and true algorithms, and then
transforming the results back to geographic coordinates.  This practice is as
old as the tradition of accurate paper maps.</p>
<p>Shapely does not support coordinate system transformations. All operations on
two or more features presume that the features exist in the same Cartesian
plane.</p>
</div>
</div>
<div class="section" id="geometric-objects">
<span id="objects"></span><h2>Geometric Objects<a class="headerlink" href="#geometric-objects" title="Permalink to this headline">¶</a></h2>
<p>Geometric objects are created in the typical Python fashion, using the classes
themselves as instance factories. A few of their intrinsic properties will be
discussed in this sections, others in the following sections on operations and
serializations.</p>
<p>Instances of <cite>Point</cite>, <cite>LineString</cite>, and <cite>LinearRing</cite> have as their most
important attribute a finite sequence of coordinates that determines their
interior, boundary, and exterior point sets. A line string can be determined by
as few as 2 points, but contains an infinite number of points. Coordinate
sequences are immutable. A third <cite>z</cite> coordinate value may be used when
constructing instances, but has no effect on geometric analysis.  All
operations are performed in the <cite>x-y</cite> plane.</p>
<p>In all constructors, numeric values are converted to type <tt class="docutils literal"><span class="pre">float</span></tt>. In other
words, <tt class="docutils literal"><span class="pre">Point(0,</span> <span class="pre">0)</span></tt> and <tt class="docutils literal"><span class="pre">Point(0.0,</span> <span class="pre">0.0)</span></tt> produce geometrically equivalent
instances. Shapely does not check the topological simplicity or validity of
instances when they are constructed as the cost is unwarranted in most cases.
Validating factories are trivially implemented, using the <tt class="xref py py-attr docutils literal"><span class="pre">is_valid</span></tt>
predicate, by users that require them.</p>
<div class="section" id="general-attributes-and-methods">
<h3>General Attributes and Methods<a class="headerlink" href="#general-attributes-and-methods" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="object.area">
<tt class="descclassname">object.</tt><tt class="descname">area</tt><a class="headerlink" href="#object.area" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the area (<tt class="docutils literal"><span class="pre">float</span></tt>) of the object.</p>
</dd></dl>

<dl class="attribute">
<dt id="object.bounds">
<tt class="descclassname">object.</tt><tt class="descname">bounds</tt><a class="headerlink" href="#object.bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <tt class="docutils literal"><span class="pre">(minx,</span> <span class="pre">miny,</span> <span class="pre">maxx,</span> <span class="pre">maxy)</span></tt> tuple (<tt class="docutils literal"><span class="pre">float</span></tt> values) that bounds
the object.</p>
</dd></dl>

<dl class="attribute">
<dt id="object.length">
<tt class="descclassname">object.</tt><tt class="descname">length</tt><a class="headerlink" href="#object.length" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the length (<tt class="docutils literal"><span class="pre">float</span></tt>) of the object.</p>
</dd></dl>

<dl class="attribute">
<dt id="object.geom_type">
<tt class="descclassname">object.</tt><tt class="descname">geom_type</tt><a class="headerlink" href="#object.geom_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string specifying the <cite>Geometry Type</cite> of the object in accordance
with <a class="footnote-reference" href="#id22" id="id7">[1]</a>.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">geom_type</span>
<span class="go">Point</span>
</pre></div>
</div>
<dl class="method">
<dt id="object.distance">
<tt class="descclassname">object.</tt><tt class="descname">distance</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the minimum distance (<tt class="docutils literal"><span class="pre">float</span></tt>) to the <cite>other</cite> geometric object.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="go">1.4142135623730951</span>
</pre></div>
</div>
<dl class="method">
<dt id="object.representative_point">
<tt class="descclassname">object.</tt><tt class="descname">representative_point</tt><big>(</big><big>)</big><a class="headerlink" href="#object.representative_point" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a cheaply computed point that is guaranteed to be within the
geometric object.</p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is not in general the same as the centroid.</p>
</div>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">donut</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">1.0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">donut</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;POINT (-0.0000000000000001 -0.0000000000000000)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">donut</span><span class="o">.</span><span class="n">representative_point</span><span class="p">()</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;POINT (-1.5000000000000000 0.0000000000000000)&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="points">
<span id="id8"></span><h3>Points<a class="headerlink" href="#points" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="Point">
<em class="property">class </em><tt class="descname">Point</tt><big>(</big><em>coordinates</em><big>)</big><a class="headerlink" href="#Point" title="Permalink to this definition">¶</a></dt>
<dd><p>The <cite>Point</cite> constructor takes positional coordinate values or point tuple
parameters.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Point</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>
</pre></div>
</div>
<p>A <cite>Point</cite> has zero area and zero length.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">point</span><span class="o">.</span><span class="n">area</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span><span class="o">.</span><span class="n">length</span>
<span class="go">0.0</span>
</pre></div>
</div>
<p>Its <cite>x-y</cite> bounding box is a <tt class="docutils literal"><span class="pre">(minx,</span> <span class="pre">miny,</span> <span class="pre">maxx,</span> <span class="pre">maxy)</span></tt> tuple.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">point</span><span class="o">.</span><span class="n">bounds</span>
<span class="go">(0.0, 0.0, 0.0, 0.0)</span>
</pre></div>
</div>
<p>Coordinate values are accessed via <cite>coords</cite>, <cite>x</cite>, <cite>y</cite>, and <cite>z</cite> properties.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[(0.0, 0.0)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span><span class="o">.</span><span class="n">x</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span><span class="o">.</span><span class="n">y</span>
<span class="go">0.0</span>
</pre></div>
</div>
<p>Coordinates may also be sliced. <cite>New in version 1.2.14</cite>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">[:]</span>
<span class="go">[(0.0, 0.0)]</span>
</pre></div>
</div>
<p>The <cite>Point</cite> constructor also accepts another <cite>Point</cite> instance, thereby making
a copy.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
<span class="go">&lt;shapely.geometry.point.Point object at 0x...&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="linestrings">
<span id="id9"></span><h3>LineStrings<a class="headerlink" href="#linestrings" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="LineString">
<em class="property">class </em><tt class="descname">LineString</tt><big>(</big><em>coordinates</em><big>)</big><a class="headerlink" href="#LineString" title="Permalink to this definition">¶</a></dt>
<dd><p>The <cite>LineString</cite> constructor takes an ordered sequence of 2 or more
<tt class="docutils literal"><span class="pre">(x,</span> <span class="pre">y[,</span> <span class="pre">z])</span></tt> point tuples.</p>
</dd></dl>

<p>The constructed <cite>LineString</cite> object represents one or more connected linear
splines between the points. Repeated points in the ordered sequence are
allowed, but may incur performance penalties and should be avoided. A
<cite>LineString</cite> may cross itself (<em>i.e.</em> be <cite>complex</cite> and not <cite>simple</cite>).</p>
<p>(<a class="reference external" href="./code/linestring.py">Source code</a>, <a class="reference external" href="./code/linestring.png">png</a>, <a class="reference external" href="./code/linestring.hires.png">hires.png</a>, <a class="reference external" href="./code/linestring.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/linestring.png" src="_images/linestring.png" />
</div>
<p>Figure 1. A simple <cite>LineString</cite> on the left, a complex <cite>LineString</cite> on the
right. The (<cite>MultiPoint</cite>) boundary of each is shown in black, the other points
that describe the lines are shown in grey.</p>
<p>A <cite>LineString</cite> has zero area and non-zero length.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">LineString</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">area</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">length</span>
<span class="go">1.4142135623730951</span>
</pre></div>
</div>
<p>Its <cite>x-y</cite> bounding box is a <tt class="docutils literal"><span class="pre">(minx,</span> <span class="pre">miny,</span> <span class="pre">maxx,</span> <span class="pre">maxy)</span></tt> tuple.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">bounds</span>
<span class="go">(0.0, 0.0, 1.0, 1.0)</span>
</pre></div>
</div>
<p>The defining coordinate values are accessed via the <cite>coords</cite> property.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[(0.0, 0.0), (1.0, 1.0)]</span>
</pre></div>
</div>
<p>Coordinates may also be sliced. <cite>New in version 1.2.14</cite>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">[:]</span>
<span class="go">[(0.0, 0.0), (1.0, 1.0)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="go">[(1.0, 1.0)]</span>
</pre></div>
</div>
<p>The constructor also accepts another <cite>LineString</cite> instance, thereby making a
copy.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="go">&lt;shapely.geometry.linestring.LineString object at 0x...&gt;</span>
</pre></div>
</div>
<p>A sequence of <cite>Point</cite> instances is not a valid constructor parameter. A
<cite>LineString</cite> is described by points, but is not composed of <cite>Point</cite> instances.</p>
</div>
<div class="section" id="linearrings">
<span id="id10"></span><h3>LinearRings<a class="headerlink" href="#linearrings" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="LinearRing">
<em class="property">class </em><tt class="descname">LinearRing</tt><big>(</big><em>coordinates</em><big>)</big><a class="headerlink" href="#LinearRing" title="Permalink to this definition">¶</a></dt>
<dd><p>The <cite>LinearRing</cite> constructor takes an ordered sequence of <tt class="docutils literal"><span class="pre">(x,</span> <span class="pre">y[,</span> <span class="pre">z])</span></tt>
point tuples.</p>
</dd></dl>

<p>The sequence may be explicitly closed by passing identical values in the first
and last indices. Otherwise, the sequence will be implicitly closed by copying
the first tuple to the last index. As with a <cite>LineString</cite>, repeated points in
the ordered sequence are allowed, but may incur performance penalties and
should be avoided. A <cite>LinearRing</cite> may not cross itself, and may not touch
itself at a single point.</p>
<p>(<a class="reference external" href="./code/linearring.py">Source code</a>, <a class="reference external" href="./code/linearring.png">png</a>, <a class="reference external" href="./code/linearring.hires.png">hires.png</a>, <a class="reference external" href="./code/linearring.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/linearring.png" src="_images/linearring.png" />
</div>
<p>Figure 2. A valid <cite>LinearRing</cite> on the left, an invalid self-touching
<cite>LinearRing</cite> on the right. The points that describe the rings are shown in
grey. A ring&#8217;s boundary is <cite>empty</cite>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Shapely will not prevent the creation of such rings, but exceptions will be
raised when they are operated on.</p>
</div>
<p>A <cite>LinearRing</cite> has zero area and non-zero length.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry.polygon</span> <span class="kn">import</span> <span class="n">LinearRing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span> <span class="o">=</span> <span class="n">LinearRing</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">area</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">length</span>
<span class="go">3.4142135623730949</span>
</pre></div>
</div>
<p>Its <cite>x-y</cite> bounding box is a <tt class="docutils literal"><span class="pre">(minx,</span> <span class="pre">miny,</span> <span class="pre">maxx,</span> <span class="pre">maxy)</span></tt> tuple.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">bounds</span>
<span class="go">(0.0, 0.0, 1.0, 1.0)</span>
</pre></div>
</div>
<p>Defining coordinate values are accessed via the <cite>coords</cite> property.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">ring</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ring</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[(0.0, 0.0), (1.0, 1.0), (1.0, 0.0), (0.0, 0.0)]</span>
</pre></div>
</div>
<p>The <cite>LinearRing</cite> constructor also accepts another <cite>LineString</cite> or <cite>LinearRing</cite>
instance, thereby making a copy.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">LinearRring</span><span class="p">(</span><span class="n">ring</span><span class="p">)</span>
<span class="go">&lt;shapely.geometry.polygon.LinearRing object at 0x...&gt;</span>
</pre></div>
</div>
<p>As with <cite>LineString</cite>, a sequence of <cite>Point</cite> instances is not a valid
constructor parameter.</p>
</div>
<div class="section" id="polygons">
<span id="id11"></span><h3>Polygons<a class="headerlink" href="#polygons" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="Polygon">
<em class="property">class </em><tt class="descname">Polygon</tt><big>(</big><em>exterior</em><span class="optional">[</span>, <em>interiors=None</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#Polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>The <cite>Polygon</cite> constructor takes two positional parameters. The first is an
ordered sequence of <tt class="docutils literal"><span class="pre">(x,</span> <span class="pre">y[,</span> <span class="pre">z])</span></tt> point tuples and is treated exactly as in
the <cite>LinearRing</cite> case. The second is an optional unordered sequence of
ring-like sequences specifying the interior boundaries or &#8220;holes&#8221; of the
feature.</p>
</dd></dl>

<p>Rings of a <cite>valid</cite> <cite>Polygon</cite> may not cross each other, but may touch at a
single point only.  Again, Shapely will not prevent the creation of invalid
features, but exceptions will be raised when they are operated on.</p>
<p>(<a class="reference external" href="./code/polygon.py">Source code</a>, <a class="reference external" href="./code/polygon.png">png</a>, <a class="reference external" href="./code/polygon.hires.png">hires.png</a>, <a class="reference external" href="./code/polygon.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/polygon.png" src="_images/polygon.png" />
</div>
<p>Figure 3. On the left, a valid <cite>Polygon</cite> with one interior ring that touches
the exterior ring at one point, and on the right a <cite>Polygon</cite> that is <cite>invalid</cite>
because its interior ring touches the exterior ring at more than one point. The
points that describe the rings are shown in grey.</p>
<p>(<a class="reference external" href="./code/polygon2.py">Source code</a>, <a class="reference external" href="./code/polygon2.png">png</a>, <a class="reference external" href="./code/polygon2.hires.png">hires.png</a>, <a class="reference external" href="./code/polygon2.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/polygon2.png" src="_images/polygon2.png" />
</div>
<p>Figure 4. On the left, a <cite>Polygon</cite> that is <cite>invalid</cite> because its exterior and
interior rings touch along a line, and on the right, a <cite>Polygon</cite> that is
<cite>invalid</cite> because its interior rings touch along a line.</p>
<p>A <cite>Polygon</cite> has non-zero area and non-zero length.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Polygon</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">polygon</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">polygon</span><span class="o">.</span><span class="n">area</span>
<span class="go">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">polygon</span><span class="o">.</span><span class="n">length</span>
<span class="go">3.4142135623730949</span>
</pre></div>
</div>
<p>Its <cite>x-y</cite> bounding box is a <tt class="docutils literal"><span class="pre">(minx,</span> <span class="pre">miny,</span> <span class="pre">maxx,</span> <span class="pre">maxy)</span></tt> tuple.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">polygon</span><span class="o">.</span><span class="n">bounds</span>
<span class="go">(0.0, 0.0, 1.0, 1.0)</span>
</pre></div>
</div>
<p>Component rings are accessed via <cite>exterior</cite> and <cite>interiors</cite> properties.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[(0.0, 0.0), (1.0, 1.0), (1.0, 0.0), (0.0, 0.0)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">interiors</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>The <cite>Polygon</cite> constructor also accepts instances of <cite>LineString</cite> and
<cite>LinearRing</cite>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">LinearRing</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">area</span>
<span class="go">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span><span class="o">.</span><span class="n">exterior</span><span class="p">,</span> <span class="p">[</span><span class="n">r</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">area</span>
<span class="go">6.5507620529190334</span>
</pre></div>
</div>
<p>Rectangular polygons occur commonly, and can be conveniently constructed using
the <a class="reference internal" href="shapely.geometry.html#shapely.geometry.box" title="shapely.geometry.box"><tt class="xref py py-func docutils literal"><span class="pre">shapely.geometry.box()</span></tt></a> function.</p>
<dl class="function">
<dt id="shapely.geometry.box">
<tt class="descclassname">shapely.geometry.</tt><tt class="descname">box</tt><big>(</big><em>minx</em>, <em>miny</em>, <em>maxx</em>, <em>maxy</em>, <em>ccw=True</em><big>)</big><a class="headerlink" href="#shapely.geometry.box" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a rectangular polygon from the provided bounding box values, with
counter-clockwise order by default.</p>
<p><cite>New in version 1.2.9</cite>.</p>
</dd></dl>

<p>For example:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">box</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">box</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">&lt;shapely.geometry.polygon.Polygon object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[(1.0, 0.0), (1.0, 1.0), (0.0, 1.0), (0.0, 0.0), (1.0, 0.0)]</span>
</pre></div>
</div>
<p>This is the first appearance of an explicit polygon handedness in Shapely.</p>
<p>To obtain a polygon with a known orientation, use
<a class="reference internal" href="#shapely.geometry.polygon.orient" title="shapely.geometry.polygon.orient"><tt class="xref py py-func docutils literal"><span class="pre">shapely.geometry.polygon.orient()</span></tt></a>:</p>
<dl class="function">
<dt id="shapely.geometry.polygon.orient">
<tt class="descclassname">shapely.geometry.polygon.</tt><tt class="descname">orient</tt><big>(</big><em>polygon</em>, <em>sign=1.0</em><big>)</big><a class="headerlink" href="#shapely.geometry.polygon.orient" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a properly oriented copy of the given polygon. The signed area of the
result will have the given sign. A sign of 1.0 means that the coordinates of
the product&#8217;s exterior ring will be oriented counter-clockwise.</p>
<p><cite>New in version 1.2.10</cite>.</p>
</dd></dl>

</div>
<div class="section" id="collections">
<span id="id12"></span><h3>Collections<a class="headerlink" href="#collections" title="Permalink to this headline">¶</a></h3>
<p>Heterogeneous collections of geometric objects may result from some Shapely
operations. For example, two <cite>LineStrings</cite> may intersect along a line and at a
point. To represent these kind of results, Shapely provides <a class="reference external" href="http://docs.python.org/library/stdtypes.html#frozenset">frozenset</a>-like,
immutable collections of geometric objects.  The collections may be homogeneous
(<cite>MultiPoint</cite> etc.) or heterogeneous.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">&lt;shapely.geometry.collection.GeometryCollection object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="go">[&lt;shapely.geometry.point.Point object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.linestring.LineString object at 0x...&gt;]</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./code/geometrycollection.py">Source code</a>, <a class="reference external" href="./code/geometrycollection.png">png</a>, <a class="reference external" href="./code/geometrycollection.hires.png">hires.png</a>, <a class="reference external" href="./code/geometrycollection.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/geometrycollection.png" class="figure" src="_images/geometrycollection.png" />
</div>
<p>Figure 5. a) a green and a yellow line that intersect along a line and at a
single point; b) the intersection (in blue) is a collection containing one
<cite>LineString</cite> and one <cite>Point</cite>.</p>
<p>Members of a <cite>GeometryCollection</cite> are accessed via the <cite>geoms</cite> property or via
the iterator protocol using <tt class="docutils literal"><span class="pre">in</span></tt>  or <tt class="docutils literal"><span class="pre">list()</span></tt>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">geoms</span><span class="p">))</span>
<span class="go">[&lt;shapely.geometry.point.Point object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.linestring.LineString object at 0x...&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="go">[&lt;shapely.geometry.point.Point object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.linestring.LineString object at 0x...&gt;]</span>
</pre></div>
</div>
<p>Homogeneous collections can also be sliced, resulting in a new object of the
same type.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">MultiPoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">MultiPoint</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;MULTIPOINT (0.0000000000000000 0.0000000000000000)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;MULTIPOINT (2.0000000000000000 2.0000000000000000)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;GEOMETRYCOLLECTION EMPTY&#39;</span>
</pre></div>
</div>
<p><cite>New in version 1.2.14</cite>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When possible, it is better to use one of the homogeneous collection types
described below.</p>
</div>
</div>
<div class="section" id="collections-of-points">
<span id="multipoints"></span><h3>Collections of Points<a class="headerlink" href="#collections-of-points" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="MultiPoint">
<em class="property">class </em><tt class="descname">MultiPoint</tt><big>(</big><em>points</em><big>)</big><a class="headerlink" href="#MultiPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>The <cite>MultiPoint</cite> constructor takes a sequence of <tt class="docutils literal"><span class="pre">(x,</span> <span class="pre">y[,</span> <span class="pre">z</span> <span class="pre">])</span></tt> point
tuples.</p>
</dd></dl>

<p>A <cite>MultiPoint</cite> has zero area and zero length.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">MultiPoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points</span> <span class="o">=</span> <span class="n">MultiPoint</span><span class="p">([(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points</span><span class="o">.</span><span class="n">area</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points</span><span class="o">.</span><span class="n">length</span>
<span class="go">0.0</span>
</pre></div>
</div>
<p>Its <cite>x-y</cite> bounding box is a <tt class="docutils literal"><span class="pre">(minx,</span> <span class="pre">miny,</span> <span class="pre">maxx,</span> <span class="pre">maxy)</span></tt> tuple.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">points</span><span class="o">.</span><span class="n">bounds</span>
<span class="go">(0.0, 0.0, 1.0, 1.0)</span>
</pre></div>
</div>
<p>Members of a multi-point collection are accessed via the <tt class="docutils literal"><span class="pre">geoms</span></tt> property or
via the iterator protocol using <tt class="docutils literal"><span class="pre">in</span></tt> or <tt class="xref py py-func docutils literal"><span class="pre">list()</span></tt>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">points</span><span class="o">.</span><span class="n">geoms</span><span class="p">))</span>
<span class="go">[&lt;shapely.geometry.point.Point object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.point.Point object at 0x...&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">points</span><span class="p">))</span>
<span class="go">[&lt;shapely.geometry.point.Point object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.point.Point object at 0x...&gt;]</span>
</pre></div>
</div>
<p>The constructor also accepts another <cite>MultiPoint</cite> instance or an unordered
sequence of <cite>Point</cite> instances, thereby making copies.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">MultiPoint</span><span class="p">([</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="go">&lt;shapely.geometry.multipoint.MultiPoint object at 0x...&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="collections-of-lines">
<span id="multilinestrings"></span><h3>Collections of Lines<a class="headerlink" href="#collections-of-lines" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="MultiLineString">
<em class="property">class </em><tt class="descname">MultiLineString</tt><big>(</big><em>lines</em><big>)</big><a class="headerlink" href="#MultiLineString" title="Permalink to this definition">¶</a></dt>
<dd><p>The <cite>MultiLineString</cite> constructor takes a sequence of line-like sequences or
objects.</p>
</dd></dl>

<p>(<a class="reference external" href="./code/multilinestring.py">Source code</a>, <a class="reference external" href="./code/multilinestring.png">png</a>, <a class="reference external" href="./code/multilinestring.hires.png">hires.png</a>, <a class="reference external" href="./code/multilinestring.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/multilinestring.png" src="_images/multilinestring.png" />
</div>
<p>Figure 6. On the left, a <cite>simple</cite>, disconnected <cite>MultiLineString</cite>, and on the
right, a non-simple <cite>MultiLineString</cite>. The points defining the objects are
shown in gray, the boundaries of the objects in black.</p>
<p>A <cite>MultiLineString</cite> has zero area and non-zero length.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">MultiLineString</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="p">[((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span> <span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span> <span class="o">=</span> <span class="n">MultiLineString</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span><span class="o">.</span><span class="n">area</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span><span class="o">.</span><span class="n">length</span>
<span class="go">3.4142135623730949</span>
</pre></div>
</div>
<p>Its <cite>x-y</cite> bounding box is a <tt class="docutils literal"><span class="pre">(minx,</span> <span class="pre">miny,</span> <span class="pre">maxx,</span> <span class="pre">maxy)</span></tt> tuple.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span><span class="o">.</span><span class="n">bounds</span>
<span class="go">(-1.0, 0.0, 1.0, 1.0)</span>
</pre></div>
</div>
<p>Its members are instances of <cite>LineString</cite> and are accessed via the <tt class="docutils literal"><span class="pre">geoms</span></tt>
property or via the iterator protocol using <tt class="docutils literal"><span class="pre">in</span></tt> or <tt class="docutils literal"><span class="pre">list()</span></tt>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="o">.</span><span class="n">geoms</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">lines</span><span class="o">.</span><span class="n">geoms</span><span class="p">))</span>
<span class="go">[&lt;shapely.geometry.linestring.LineString object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.linestring.LineString object at 0x...&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">lines</span><span class="p">))</span>
<span class="go">[&lt;shapely.geometry.linestring.LineString object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.linestring.LineString object at 0x...&gt;]</span>
</pre></div>
</div>
<p>The constructor also accepts another instance of <cite>MultiLineString</cite> or an
unordered sequence of <cite>LineString</cite> instances, thereby making copies.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">MultiLineString</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
<span class="go">&lt;shapely.geometry.multilinestring.MultiLineString object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MultiLineString</span><span class="p">(</span><span class="n">lines</span><span class="o">.</span><span class="n">geoms</span><span class="p">)</span>
<span class="go">&lt;shapely.geometry.multilinestring.MultiLineString object at 0x...&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="collections-of-polygons">
<span id="multipolygons"></span><h3>Collections of Polygons<a class="headerlink" href="#collections-of-polygons" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="MultiPolygon">
<em class="property">class </em><tt class="descname">MultiPolygon</tt><big>(</big><em>polygons</em><big>)</big><a class="headerlink" href="#MultiPolygon" title="Permalink to this definition">¶</a></dt>
<dd><p>The <cite>MultiPolygon</cite> constructor takes a sequence of exterior ring and
hole list tuples: [((a1, ..., aM), [(b1, ..., bN), ...]), ...].</p>
</dd></dl>

<p>More clearly, the constructor also accepts an unordered sequence of <cite>Polygon</cite>
instances, thereby making copies.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">polygons</span> <span class="o">=</span> <span class="n">MultiPolygon</span><span class="p">([</span><span class="n">polygon</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">polygons</span><span class="o">.</span><span class="n">geoms</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./code/multipolygon.py">Source code</a>, <a class="reference external" href="./code/multipolygon.png">png</a>, <a class="reference external" href="./code/multipolygon.hires.png">hires.png</a>, <a class="reference external" href="./code/multipolygon.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/multipolygon.png" src="_images/multipolygon.png" />
</div>
<p>Figure 7. On the right, a <cite>valid</cite> <cite>MultiPolygon</cite> with 2 members, and on the
right, a <cite>MultiPolygon</cite> that is invalid because its members touch at an
infinite number of points (along a line).</p>
<p>Its <cite>x-y</cite> bounding box is a <tt class="docutils literal"><span class="pre">(minx,</span> <span class="pre">miny,</span> <span class="pre">maxx,</span> <span class="pre">maxy)</span></tt> tuple.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">polygons</span><span class="o">.</span><span class="n">bounds</span>
<span class="go">(-1.0, -1.0, 2.0, 2.0)</span>
</pre></div>
</div>
<p>Its members are instances of <cite>Polygon</cite> and are accessed via the <tt class="docutils literal"><span class="pre">geoms</span></tt>
property or via the iterator protocol using <tt class="docutils literal"><span class="pre">in</span></tt> or <tt class="docutils literal"><span class="pre">list()</span></tt>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">polygons</span><span class="o">.</span><span class="n">geoms</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
</div>
<div class="section" id="empty-features">
<span id="empties"></span><h3>Empty features<a class="headerlink" href="#empty-features" title="Permalink to this headline">¶</a></h3>
<p>An &#8220;empty&#8221; feature is one with a point set that coincides with the empty set;
not <tt class="docutils literal"><span class="pre">None</span></tt>, but like <tt class="docutils literal"><span class="pre">set([])</span></tt>. Empty features can be created by calling
the various constructors with no arguments. Almost no operations are supported
by empty features.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">line</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">is_empty</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">length</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">bounds</span>
<span class="go">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">coords</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>The coordinates of a empty feature can be set, after which the geometry is no
longer empty.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">is_empty</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">length</span>
<span class="go">1.4142135623730951</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">.</span><span class="n">bounds</span>
<span class="go">(0.0, 0.0, 1.0, 1.0)</span>
</pre></div>
</div>
</div>
<div class="section" id="linear-referencing-methods">
<h3>Linear Referencing Methods<a class="headerlink" href="#linear-referencing-methods" title="Permalink to this headline">¶</a></h3>
<p>It can be useful to specify position along linear features such as <cite>LineStrings</cite>
and <cite>MultiLineStrings</cite> with a 1-dimensional referencing system. Shapely
supports linear referencing based on length or distance, evaluating the
distance along a geometric object to the projection of a given point, or the
point at a given distance along the object.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Linear referencing methods require GEOS 3.2.0 or later.</p>
</div>
<dl class="method">
<dt id="object.interpolate">
<tt class="descclassname">object.</tt><tt class="descname">interpolate</tt><big>(</big><em>distance</em><span class="optional">[</span>, <em>normalized=False</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#object.interpolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a point at the specified distance along a linear geometric object.</p>
</dd></dl>

<p>If the <cite>normalized</cite> arg is <tt class="docutils literal"><span class="pre">True</span></tt>, the distance will be interpreted as a
fraction of the geometric object&#8217;s length.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span>
<span class="go">&lt;shapely.geometry.point.Point object at 0x740570&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;POINT (0.5000000000000000 1.0000000000000000)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">normalized</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;POINT (0.5000000000000000 1.0000000000000000)&#39;</span>
</pre></div>
</div>
<dl class="method">
<dt id="object.project">
<tt class="descclassname">object.</tt><tt class="descname">project</tt><big>(</big><em>other</em><span class="optional">[</span>, <em>normalized=False</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#object.project" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the distance along this geometric object to a point nearest the
<cite>other</cite> object.</p>
</dd></dl>

<p>If the <cite>normalized</cite> arg is <tt class="docutils literal"><span class="pre">True</span></tt>, return the distance normalized to the
length of the object. The <a class="reference internal" href="#object.project" title="object.project"><tt class="xref py py-meth docutils literal"><span class="pre">project()</span></tt></a> method is the inverse of
<a class="reference internal" href="#object.interpolate" title="object.interpolate"><tt class="xref py py-meth docutils literal"><span class="pre">interpolate()</span></tt></a>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
<span class="go">1.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="n">normalized</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">0.75</span>
</pre></div>
</div>
<p>For example, the linear referencing methods might be used to cut lines at a
specified distance.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">cut</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
    <span class="c"># Cuts a line in two at a distance from its starting point</span>
    <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;=</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">distance</span> <span class="o">&gt;=</span> <span class="n">line</span><span class="o">.</span><span class="n">length</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">LineString</span><span class="p">(</span><span class="n">line</span><span class="p">)]</span>
    <span class="n">coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coords</span><span class="p">):</span>
        <span class="n">pd</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">pd</span> <span class="o">==</span> <span class="n">distance</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="n">LineString</span><span class="p">(</span><span class="n">coords</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">LineString</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">:])]</span>
        <span class="k">if</span> <span class="n">pd</span> <span class="o">&gt;</span> <span class="n">distance</span><span class="p">:</span>
            <span class="n">cp</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="n">LineString</span><span class="p">(</span><span class="n">coords</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">[(</span><span class="n">cp</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">cp</span><span class="o">.</span><span class="n">y</span><span class="p">)]),</span>
                <span class="n">LineString</span><span class="p">([(</span><span class="n">cp</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">cp</span><span class="o">.</span><span class="n">y</span><span class="p">)]</span> <span class="o">+</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">:])]</span>
</pre></div>
</div>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">line</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cut</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)])</span>
<span class="go">[[(0.0, 0.0), (1.0, 0.0)],</span>
<span class="go"> [(1.0, 0.0), (2.0, 0.0), (3.0, 0.0), (4.0, 0.0), (5.0, 0.0)]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cut</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)])</span>
<span class="go">[[(0.0, 0.0), (1.0, 0.0), (2.0, 0.0), (2.5, 0.0)],</span>
<span class="go"> [(2.5, 0.0), (3.0, 0.0), (4.0, 0.0), (5.0, 0.0)]]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="predicates-and-relationships">
<span id="predicates"></span><h2>Predicates and Relationships<a class="headerlink" href="#predicates-and-relationships" title="Permalink to this headline">¶</a></h2>
<p>Objects of the types explained in <a class="reference internal" href="#objects"><em>Geometric Objects</em></a> provide standard <a class="footnote-reference" href="#id22" id="id13">[1]</a>
predicates as attributes (for unary predicates) and methods (for binary
predicates). Whether unary or binary, all return <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
<div class="section" id="unary-predicates">
<span id="id14"></span><h3>Unary Predicates<a class="headerlink" href="#unary-predicates" title="Permalink to this headline">¶</a></h3>
<p>Standard unary predicates are implemented as read-only property attributes. An
example will be shown for each.</p>
<dl class="attribute">
<dt id="object.has_z">
<tt class="descclassname">object.</tt><tt class="descname">has_z</tt><a class="headerlink" href="#object.has_z" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the feature has not only <cite>x</cite> and <cite>y</cite>, but also <cite>z</cite>
coordinates for 3D (or so-called, 2.5D) geometries.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">has_z</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">has_z</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="object.is_ccw">
<tt class="descclassname">object.</tt><tt class="descname">is_ccw</tt><a class="headerlink" href="#object.is_ccw" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if coordinates are in counter-clockwise order (bounding a
region with positive signed area). This method applies to <cite>LinearRing</cite>
objects only.</p>
<p><cite>New in version 1.2.10</cite>.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">LinearRing</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)])</span><span class="o">.</span><span class="n">is_ccw</span>
<span class="go">True</span>
</pre></div>
</div>
<p>A ring with an undesired orientation can be reversed like this:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span> <span class="o">=</span> <span class="n">LinearRing</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">is_ccw</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ring</span><span class="o">.</span><span class="n">coords</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="o">.</span><span class="n">is_ccw</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="object.is_empty">
<tt class="descclassname">object.</tt><tt class="descname">is_empty</tt><a class="headerlink" href="#object.is_empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the feature&#8217;s <cite>interior</cite> and <cite>boundary</cite> (in point set
terms) coincide with the empty set.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">()</span><span class="o">.</span><span class="n">is_empty</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">is_empty</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">With the help of the <tt class="xref py py-mod docutils literal"><span class="pre">operator</span></tt> module&#8217;s <tt class="xref py py-func docutils literal"><span class="pre">attrgetter()</span></tt> function,
unary predicates such as <tt class="docutils literal"><span class="pre">is_empty</span></tt> can be easily used as predicates for
the built in <tt class="xref py py-func docutils literal"><span class="pre">filter()</span></tt> or <tt class="xref py py-func docutils literal"><span class="pre">itertools.ifilter()</span></tt>.</p>
</div>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">attrgetter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">empties</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">attrgetter</span><span class="p">(</span><span class="s">&#39;is_empty&#39;</span><span class="p">),</span> <span class="p">[</span><span class="n">Point</span><span class="p">(),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">empties</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="object.is_ring">
<tt class="descclassname">object.</tt><tt class="descname">is_ring</tt><a class="headerlink" href="#object.is_ring" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the feature is closed. A closed feature&#8217;s <cite>boundary</cite>
coincides with the empty set.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">is_ring</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LinearRing</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">is_ring</span>
<span class="go">True</span>
</pre></div>
</div>
<p>This property is applicable to <cite>LineString</cite> and <cite>LinearRing</cite> instances, but
meaningless for others.</p>
<dl class="attribute">
<dt id="object.is_simple">
<tt class="descclassname">object.</tt><tt class="descname">is_simple</tt><a class="headerlink" href="#object.is_simple" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the feature does not cross itself.</p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The simplicity test is meaningful only for <cite>LineStrings</cite> and <cite>LinearRings</cite>.</p>
</div>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">is_simple</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Operations on non-simple <cite>LineStrings</cite> are fully supported by Shapely.</p>
<dl class="attribute">
<dt id="object.is_valid">
<tt class="descclassname">object.</tt><tt class="descname">is_valid</tt><a class="headerlink" href="#object.is_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if a feature is &#8220;valid&#8221; in the sense of <a class="footnote-reference" href="#id22" id="id15">[1]</a>.</p>
</dd></dl>

<p>A valid <cite>LinearRing</cite> may not cross itself or touch itself at a single point. A
valid <cite>Polygon</cite> may not possess any overlapping exterior or interior rings. A
valid <cite>MultiPolygon</cite> may not collect any overlapping polygons. Operations on
invalid features may fail.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">MultiPolygon</span><span class="p">([</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">2.0</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)])</span><span class="o">.</span><span class="n">is_valid</span>
<span class="go">False</span>
</pre></div>
</div>
<p>The two points above are close enough that the polygons resulting from the
buffer operations (explained in a following section) overlap.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">is_valid</span></tt> predicate can be used to write a validating decorator that
could ensure that only valid objects are returned from a constructor
function.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">ob</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ob</span><span class="o">.</span><span class="n">is_valid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TopologicalError</span><span class="p">(</span>
                <span class="s">&quot;Given arguments do not determine a valid geometric object&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ob</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>
</div>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nd">@validate</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">ring</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">LinearRing</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">7</span>, in <span class="n">wrapper</span>
<span class="gr">shapely.geos.TopologicalError</span>: <span class="n">Given arguments do not determine a valid geometric object</span>
</pre></div>
</div>
</div>
<div class="section" id="binary-predicates">
<span id="id16"></span><h3>Binary Predicates<a class="headerlink" href="#binary-predicates" title="Permalink to this headline">¶</a></h3>
<p>Standard binary predicates are implemented as methods. These predicates
evaluate topological, set-theoretic relationships. In a few cases the results
may not be what one might expect starting from different assumptions. All take
another geometric object as argument and return <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
<dl class="method">
<dt id="object.almost_equals">
<tt class="descclassname">object.</tt><tt class="descname">almost_equals</tt><big>(</big><em>other</em><span class="optional">[</span>, <em>decimal=6</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#object.almost_equals" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the object is approximately equal to the <cite>other</cite> at all
points to specified <cite>decimal</cite> place precision.</p>
</dd></dl>

<p>See also <a class="reference internal" href="#object.equals" title="object.equals"><tt class="xref py py-meth docutils literal"><span class="pre">equals()</span></tt></a>.</p>
<dl class="method">
<dt id="object.contains">
<tt class="descclassname">object.</tt><tt class="descname">contains</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.contains" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the object&#8217;s <cite>interior</cite> contains the <cite>boundary</cite> and
<cite>interior</cite> of the other object and their boundaries do not touch at all.</p>
</dd></dl>

<p>This predicate applies to all types, and is inverse to <a class="reference internal" href="#object.within" title="object.within"><tt class="xref py py-meth docutils literal"><span class="pre">within()</span></tt></a>. The
expression <tt class="docutils literal"><span class="pre">a.contains(b)</span> <span class="pre">==</span> <span class="pre">b.within(a)</span></tt> always evaluates to <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">LineString</span><span class="p">(</span><span class="n">coords</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<p>A line&#8217;s endpoints are part of its <cite>boundary</cite> and are therefore not contained.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Binary predicates can be used directly as predicates for <tt class="docutils literal"><span class="pre">filter()</span></tt> or
<tt class="docutils literal"><span class="pre">itertools.ifilter()</span></tt>.</p>
</div>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">line</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contained</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">contains</span><span class="p">,</span> <span class="p">[</span><span class="n">Point</span><span class="p">(),</span> <span class="n">Point</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">contained</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">wkt</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">contained</span><span class="p">]</span>
<span class="go">[&#39;POINT (0.5000000000000000 0.5000000000000000)&#39;]</span>
</pre></div>
</div>
<dl class="method">
<dt id="object.crosses">
<tt class="descclassname">object.</tt><tt class="descname">crosses</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.crosses" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the <cite>interior</cite> of the object intersects the <cite>interior</cite> of
the other but does not contain it, and the dimension of the intersection is
less than the dimension of the one or the other.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span><span class="o">.</span><span class="n">crosses</span><span class="p">(</span><span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]))</span>
<span class="go">True</span>
</pre></div>
</div>
<p>A line does not cross a point that it contains.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span><span class="o">.</span><span class="n">crosses</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="method">
<dt id="object.disjoint">
<tt class="descclassname">object.</tt><tt class="descname">disjoint</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.disjoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the <cite>boundary</cite> and <cite>interior</cite> of the object do not
intersect at all with those of the other.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">disjoint</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<p>This predicate applies to all types and is the inverse of <a class="reference internal" href="#object.intersects" title="object.intersects"><tt class="xref py py-meth docutils literal"><span class="pre">intersects()</span></tt></a>.</p>
<dl class="method">
<dt id="object.equals">
<tt class="descclassname">object.</tt><tt class="descname">equals</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.equals" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the set-theoretic <cite>boundary</cite>, <cite>interior</cite>, and <cite>exterior</cite>
of the object coincide with those of the other.</p>
</dd></dl>

<p>The coordinates passed to the object constructors are of these sets, and
determine them, but are not the entirety of the sets. This is a potential
&#8220;gotcha&#8221; for new users.  Equivalent lines, for example, can be constructed
differently.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>This predicate should not be mistaken for Python&#8217;s <tt class="docutils literal"><span class="pre">==</span></tt> or <tt class="docutils literal"><span class="pre">is</span></tt>
constructions.</p>
<dl class="method">
<dt id="object.intersects">
<tt class="descclassname">object.</tt><tt class="descname">intersects</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.intersects" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the <cite>boundary</cite> and <cite>interior</cite> of the object intersect in
any way with those of the other.</p>
</dd></dl>

<p>This predicate is equivalent to the OR-ing of <a class="reference internal" href="#object.contains" title="object.contains"><tt class="xref py py-meth docutils literal"><span class="pre">contains()</span></tt></a>, <a class="reference internal" href="#object.crosses" title="object.crosses"><tt class="xref py py-meth docutils literal"><span class="pre">crosses()</span></tt></a>,
<a class="reference internal" href="#object.equals" title="object.equals"><tt class="xref py py-meth docutils literal"><span class="pre">equals()</span></tt></a>, <a class="reference internal" href="#object.touches" title="object.touches"><tt class="xref py py-meth docutils literal"><span class="pre">touches()</span></tt></a>, and <a class="reference internal" href="#object.within" title="object.within"><tt class="xref py py-meth docutils literal"><span class="pre">within()</span></tt></a>.</p>
<dl class="method">
<dt id="object.touches">
<tt class="descclassname">object.</tt><tt class="descname">touches</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.touches" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the objects have at least one point in common and their
interiors do not intersect with any part of the other.</p>
</dd></dl>

<p>Overlapping features do not therefore <cite>touch</cite>, another potential &#8220;gotcha&#8221;. For
example, the following lines touch at <tt class="docutils literal"><span class="pre">(1,</span> <span class="pre">1)</span></tt>, but do not overlap.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">touches</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="object.within">
<tt class="descclassname">object.</tt><tt class="descname">within</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.within" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the object&#8217;s <cite>boundary</cite> and <cite>interior</cite> intersect only
with the <cite>interior</cite> of the other (not its <cite>boundary</cite> or <cite>exterior</cite>).</p>
</dd></dl>

<p>This applies to all types and is the inverse of <a class="reference internal" href="#object.contains" title="object.contains"><tt class="xref py py-meth docutils literal"><span class="pre">contains()</span></tt></a>.</p>
<p>Used in a <tt class="docutils literal"><span class="pre">sorted()</span></tt> <cite>key</cite>, <a class="reference internal" href="#object.within" title="object.within"><tt class="xref py py-meth docutils literal"><span class="pre">within()</span></tt></a> makes it easy to spatially sort
objects. Let&#8217;s say we have 4 stereotypic features: a point that is contained by
a polygon which is itself contained by another polygon, and a free spirited
point contained by none</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>and that copies of these are collected into a list</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">features</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span>
</pre></div>
</div>
<p>that we&#8217;d prefer to have ordered as <tt class="docutils literal"><span class="pre">[d,</span> <span class="pre">c,</span> <span class="pre">c,</span> <span class="pre">b,</span> <span class="pre">a]</span></tt> in reverse containment
order. As explained in the Python <a class="reference external" href="http://wiki.python.org/moin/HowTo/Sorting/">Sorting HowTo</a>, we can define a key
function that operates on each list element and returns a value for comparison.
Our key function will be a wrapper class that implements <tt class="docutils literal"><span class="pre">__lt__()</span></tt> using
Shapely&#8217;s binary <a class="reference internal" href="#object.within" title="object.within"><tt class="xref py py-meth docutils literal"><span class="pre">within()</span></tt></a> predicate.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">asShape</span>

<span class="k">class</span> <span class="nc">Within</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">o</span> <span class="o">=</span> <span class="n">o</span>
    <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">o</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">o</span><span class="p">)</span>
</pre></div>
</div>
<p>As the howto says, the <cite>less than</cite> comparison is guaranteed to be used in
sorting. That&#8217;s what we&#8217;ll rely on to spatially sort, and the reason why we use
<a class="reference internal" href="#object.within" title="object.within"><tt class="xref py py-meth docutils literal"><span class="pre">within()</span></tt></a> in reverse instead of <a class="reference internal" href="#object.contains" title="object.contains"><tt class="xref py py-meth docutils literal"><span class="pre">contains()</span></tt></a>. Trying it out on features
<cite>d</cite> and <cite>c</cite>, we see that it works.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">&lt;</span> <span class="n">c</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Within</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">Within</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>It also works on the list of features, producing the order we want.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">d</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">]</span> <span class="o">==</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">Within</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="de-9im-relationships">
<h3>DE-9IM Relationships<a class="headerlink" href="#de-9im-relationships" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#object.relate" title="object.relate"><tt class="xref py py-meth docutils literal"><span class="pre">relate()</span></tt></a> method tests all the DE-9IM <a class="footnote-reference" href="#id25" id="id17">[4]</a> relationships between
objects, of which the named relationship predicates above are a subset.</p>
<dl class="method">
<dt id="object.relate">
<tt class="descclassname">object.</tt><tt class="descname">relate</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.relate" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string representation of the DE-9IM matrix of relationships
between an object&#8217;s <cite>interior</cite>, <cite>boundary</cite>, <cite>exterior</cite> and those of another
geometric object.</p>
</dd></dl>

<p>The named relationship predicates (<a class="reference internal" href="#object.contains" title="object.contains"><tt class="xref py py-meth docutils literal"><span class="pre">contains()</span></tt></a>, etc.) are typically
implemented as wrappers around <a class="reference internal" href="#object.relate" title="object.relate"><tt class="xref py py-meth docutils literal"><span class="pre">relate()</span></tt></a>.</p>
<p>Two different points have mainly <tt class="docutils literal"><span class="pre">F</span></tt> (false) values in their matrix; the
intersection of their <cite>external</cite> sets (the 9th element) is a <tt class="docutils literal"><span class="pre">2</span></tt> dimensional
object (the rest of the plane). The intersection of the <cite>interior</cite> of one with
the <cite>exterior</cite> of the other is a <tt class="docutils literal"><span class="pre">0</span></tt> dimensional object (3rd and 7th elements
of the matrix).</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">relate</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">&#39;FF0FFF0F2&#39;</span>
</pre></div>
</div>
<p>The matrix for a line and a point on the line has more &#8220;true&#8221; (not <tt class="docutils literal"><span class="pre">F</span></tt>)
elements.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">relate</span><span class="p">(</span><span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]))</span>
<span class="go">&#39;F0FFFF102&#39;</span>
</pre></div>
</div>
<p>Further discussion of the DE-9IM matrix is beyond the scope of this manual. See
<a class="footnote-reference" href="#id25" id="id18">[4]</a> and <a class="reference external" href="http://pypi.python.org/pypi/de9im">http://pypi.python.org/pypi/de9im</a>.</p>
</div>
</div>
<div class="section" id="spatial-analysis-methods">
<span id="analysis-methods"></span><h2>Spatial Analysis Methods<a class="headerlink" href="#spatial-analysis-methods" title="Permalink to this headline">¶</a></h2>
<p>As well as boolean attributes and methods, Shapely provides analysis methods
that return new geometric objects.</p>
<div class="section" id="set-theoretic-methods">
<span id="id19"></span><h3>Set-theoretic Methods<a class="headerlink" href="#set-theoretic-methods" title="Permalink to this headline">¶</a></h3>
<p>Almost every binary predicate method has a counterpart that returns a new
geometric object. In addition, the set-theoretic <cite>boundary</cite> of an object is
available as a read-only attribute.</p>
<dl class="attribute">
<dt id="object.boundary">
<tt class="descclassname">object.</tt><tt class="descname">boundary</tt><a class="headerlink" href="#object.boundary" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a lower dimensional object representing the object&#8217;s set-theoretic
<cite>boundary</cite>.</p>
</dd></dl>

<p>The boundary of a polygon is a line, the boundary of a line is a collection of
points. The boundary of a point is an empty (null) collection.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="go">&gt;&gt; coords = [((0, 0), (1, 1)), ((-1, 0), (1, 0))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span> <span class="o">=</span> <span class="n">MultiLineString</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span><span class="o">.</span><span class="n">boundary</span>
<span class="go">&lt;shapely.geometry.multipoint.MultiPoint object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">lines</span><span class="o">.</span><span class="n">boundary</span><span class="p">))</span>
<span class="go">[&lt;shapely.geometry.point.Point object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.point.Point object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.point.Point object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.point.Point object at 0x...&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">boundary</span>
<span class="go">&lt;shapely.geometry.collection.GeometryCollection object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">is_empty</span>
<span class="go">True</span>
</pre></div>
</div>
<p>See the figures in <a class="reference internal" href="#linestrings"><em>LineStrings</em></a> and <a class="reference internal" href="#multilinestrings"><em>Collections of Lines</em></a> for the
illustration of lines and their boundaries.</p>
<dl class="attribute">
<dt id="object.centroid">
<tt class="descclassname">object.</tt><tt class="descname">centroid</tt><a class="headerlink" href="#object.centroid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a representation of the object&#8217;s geometric centroid (point).</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">centroid</span>
<span class="go">&lt;shapely.geometry.point.Point object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;POINT (0.5000000000000000 0.5000000000000000)&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The centroid of an object might be one of its points, but this is not
guaranteed.</p>
</div>
<dl class="method">
<dt id="object.difference">
<tt class="descclassname">object.</tt><tt class="descname">difference</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.difference" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a representation of the points making up this geometric object that
do not make up the <em>other</em> object.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">&lt;shapely.geometry.polygon.Polygon object at 0x...&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="#object.buffer" title="object.buffer"><tt class="xref py py-meth docutils literal"><span class="pre">buffer()</span></tt></a> method is used to produce approximately circular polygons
in the examples of this section; it will be explained in detail later in this
manual.</p>
</div>
<p>(<a class="reference external" href="./code/difference.py">Source code</a>, <a class="reference external" href="./code/difference.png">png</a>, <a class="reference external" href="./code/difference.hires.png">hires.png</a>, <a class="reference external" href="./code/difference.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/difference.png" src="_images/difference.png" />
</div>
<p>Figure 8. Differences between two approximately circular polygons.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Shapely can not represent the difference between an object and a lower
dimensional object (such as the difference between a polygon and a line or
point) as a single object, and in these cases the difference method returns a
copy of the object named <tt class="docutils literal"><span class="pre">self</span></tt>.</p>
</div>
<dl class="method">
<dt id="object.intersection">
<tt class="descclassname">object.</tt><tt class="descname">intersection</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a representation of the intersection of this object with the <cite>other</cite>
geometric object.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">&lt;shapely.geometry.polygon.Polygon object at 0x...&gt;</span>
</pre></div>
</div>
<p>See the figure under <a class="reference internal" href="#object.symmetric_difference" title="object.symmetric_difference"><tt class="xref py py-meth docutils literal"><span class="pre">symmetric_difference()</span></tt></a> below.</p>
<dl class="method">
<dt id="object.symmetric_difference">
<tt class="descclassname">object.</tt><tt class="descname">symmetric_difference</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.symmetric_difference" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a representation of the points in this object not in the <cite>other</cite>
geometric object, and the points in the <cite>other</cite> not in this geometric object.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">&lt;shapely.geometry.multipolygon.MultiPolygon object at ...&gt;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./code/intersection-sym-difference.py">Source code</a>, <a class="reference external" href="./code/intersection-sym-difference.png">png</a>, <a class="reference external" href="./code/intersection-sym-difference.hires.png">hires.png</a>, <a class="reference external" href="./code/intersection-sym-difference.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/intersection-sym-difference.png" src="_images/intersection-sym-difference.png" />
</div>
<dl class="method">
<dt id="object.union">
<tt class="descclassname">object.</tt><tt class="descname">union</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#object.union" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a representation of the union of points from this object and the
<cite>other</cite> geometric object.</p>
</dd></dl>

<p>The type of object returned depends on the relationship between the operands.
The union of polygons (for example) will be a polygon or a multi-polygon
depending on whether they intersect or not.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">&lt;shapely.geometry.polygon.Polygon object at 0x...&gt;</span>
</pre></div>
</div>
<p>The semantics of these operations vary with type of geometric object.  For
example, compare the boundary of the union of polygons to the union of their
boundaries.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">boundary</span>
<span class="go">&lt;shapely.geometry.polygon.LinearRing object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">boundary</span><span class="p">)</span>
<span class="go">&lt;shapely.geometry.multilinestring.MultiLineString object at 0x...&gt;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./code/union.py">Source code</a>, <a class="reference external" href="./code/union.png">png</a>, <a class="reference external" href="./code/union.hires.png">hires.png</a>, <a class="reference external" href="./code/union.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/union.png" src="_images/union.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#object.union" title="object.union"><tt class="xref py py-meth docutils literal"><span class="pre">union()</span></tt></a> is an expensive way to find the cumulative union
of many objects. See <a class="reference internal" href="#shapely.ops.cascaded_union" title="shapely.ops.cascaded_union"><tt class="xref py py-func docutils literal"><span class="pre">shapely.ops.cascaded_union()</span></tt></a> for a more effective
method.</p>
</div>
</div>
<div class="section" id="constructive-methods">
<h3>Constructive Methods<a class="headerlink" href="#constructive-methods" title="Permalink to this headline">¶</a></h3>
<p>Shapely geometric object have several methods that yield new objects not
derived from set-theoretic analysis.</p>
<dl class="method">
<dt id="object.buffer">
<tt class="descclassname">object.</tt><tt class="descname">buffer</tt><big>(</big><em>distance</em>, <em>resolution=16</em>, <em>cap_style=1</em>, <em>join_style=1</em>, <em>mitre_limit=1.0</em><big>)</big><a class="headerlink" href="#object.buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an approximate representation of all points within a given <cite>distance</cite>
of the this geometric object.</p>
<p>The styles of caps are specified by integer values: 1 (round), 2 (flat),
3 (square). These values are also enumerated by the object
<a class="reference internal" href="shapely.geometry.html#shapely.geometry.CAP_STYLE" title="shapely.geometry.CAP_STYLE"><tt class="xref py py-class docutils literal"><span class="pre">shapely.geometry.CAP_STYLE</span></tt></a> (see below).</p>
<p>The styles of joins between offset segments are specified by integer values:
1 (round), 2 (mitre), and 3 (bevel). These values are also enumerated by the
object <a class="reference internal" href="shapely.geometry.html#shapely.geometry.JOIN_STYLE" title="shapely.geometry.JOIN_STYLE"><tt class="xref py py-class docutils literal"><span class="pre">shapely.geometry.JOIN_STYLE</span></tt></a> (see below).</p>
</dd></dl>

<dl class="data">
<dt id="shapely.geometry.CAP_STYLE">
<tt class="descclassname">shapely.geometry.</tt><tt class="descname">CAP_STYLE</tt><a class="headerlink" href="#shapely.geometry.CAP_STYLE" title="Permalink to this definition">¶</a></dt>
<dd><table border="1" class="docutils">
<colgroup>
<col width="64%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>round</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>flat</td>
<td>2</td>
</tr>
<tr class="row-even"><td>square</td>
<td>3</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="shapely.geometry.JOIN_STYLE">
<tt class="descclassname">shapely.geometry.</tt><tt class="descname">JOIN_STYLE</tt><a class="headerlink" href="#shapely.geometry.JOIN_STYLE" title="Permalink to this definition">¶</a></dt>
<dd><table border="1" class="docutils">
<colgroup>
<col width="64%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>round</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>mitre</td>
<td>2</td>
</tr>
<tr class="row-even"><td>bevel</td>
<td>3</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">CAP_STYLE</span><span class="p">,</span> <span class="n">JOIN_STYLE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CAP_STYLE</span><span class="o">.</span><span class="n">flat</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">JOIN_STYLE</span><span class="o">.</span><span class="n">bevel</span>
<span class="go">3</span>
</pre></div>
</div>
<p>A positive distance has an effect of dilation; a negative distance, erosion.
The optional <cite>resolution</cite> argument determines the number of segments used to
approximate a quarter circle around a point.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">line</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dilated</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eroded</span> <span class="o">=</span> <span class="n">dilated</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="o">-</span><span class="mf">0.3</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./code/buffer.py">Source code</a>, <a class="reference external" href="./code/buffer.png">png</a>, <a class="reference external" href="./code/buffer.hires.png">hires.png</a>, <a class="reference external" href="./code/buffer.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/buffer.png" src="_images/buffer.png" />
</div>
<p>Figure 9. Dilation of a line (left) and erosion of a polygon (right). New
object is shown in blue.</p>
<p>The default (<cite>resolution</cite> of 16) buffer of a point is a polygonal patch with
99.8% of the area of the circular disk it approximates.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">10.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">66</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">area</span>
<span class="go">313.65484905459385</span>
</pre></div>
</div>
<p>With a <cite>resolution</cite> of 1, the buffer is a square patch.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">q</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">area</span>
<span class="go">200.0</span>
</pre></div>
</div>
<p>Passed a <cite>distance</cite> of 0, <a class="reference internal" href="#object.buffer" title="object.buffer"><tt class="xref py py-meth docutils literal"><span class="pre">buffer()</span></tt></a> can be used to &#8220;clean&#8221; self-touching
or self-crossing polygons such as the classic &#8220;bowtie&#8221;.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bowtie</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bowtie</span><span class="o">.</span><span class="n">is_valid</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clean</span> <span class="o">=</span> <span class="n">bowtie</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clean</span><span class="o">.</span><span class="n">is_valid</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clean</span>
<span class="go">&lt;shapely.geometry.multipolygon.MultiPolygon object at ...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">clean</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">clean</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[(0.0, 0.0), (0.0, 2.0), (1.0, 1.0), (0.0, 0.0)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">clean</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[(1.0, 1.0), (2.0, 2.0), (2.0, 0.0), (1.0, 1.0)]</span>
</pre></div>
</div>
<p>Buffering splits the polygon in two at the point where they touch.</p>
<dl class="attribute">
<dt id="object.convex_hull">
<tt class="descclassname">object.</tt><tt class="descname">convex_hull</tt><a class="headerlink" href="#object.convex_hull" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a representation of the smallest convex <cite>Polygon</cite> containing all the
points in the object unless the number of points in the object is less than
three. For two points, the convex hull collapses to a <cite>LineString</cite>; for 1, a
<cite>Point</cite>.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">convex_hull</span>
<span class="go">&lt;shapely.geometry.point.Point object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MultiPoint</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">convex_hull</span>
<span class="go">&lt;shapely.geometry.linestring.LineString object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MultiPoint</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">convex_hull</span>
<span class="go">&lt;shapely.geometry.polygon.Polygon object at 0x...&gt;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./code/convex_hull.py">Source code</a>, <a class="reference external" href="./code/convex_hull.png">png</a>, <a class="reference external" href="./code/convex_hull.hires.png">hires.png</a>, <a class="reference external" href="./code/convex_hull.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/convex_hull.png" src="_images/convex_hull.png" />
</div>
<p>Figure 10. Convex hull (blue) of 2 points (left) and of 6 points (right).</p>
<dl class="attribute">
<dt id="object.envelope">
<tt class="descclassname">object.</tt><tt class="descname">envelope</tt><a class="headerlink" href="#object.envelope" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a representation of the point or smallest rectangular polygon (with
sides parallel to the coordinate axes) that contains the object.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">envelope</span>
<span class="go">&lt;shapely.geometry.point.Point object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MultiPoint</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">envelope</span>
<span class="go">&lt;shapely.geometry.polygon.Polygon object at 0x...&gt;</span>
</pre></div>
</div>
<dl class="method">
<dt id="object.parallel_offset">
<tt class="descclassname">object.</tt><tt class="descname">parallel_offset</tt><big>(</big><em>distance</em>, <em>side</em>, <em>resolution=16</em>, <em>join_style=1</em>, <em>mitre_limit=1.0</em><big>)</big><a class="headerlink" href="#object.parallel_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a LineString or MultiLineString geometry at a distance from the
object on its right or its left side.</p>
<p>Distance must be a positive float value. The side parameter may be &#8216;left&#8217; or
&#8216;right&#8217;. The resolution of the offset around each vertex of the object is
parameterized as in the buffer method.</p>
<p>The join style is for outside corners between line segments. Accepted integer
values are 1 (round), 2 (mitre), and 3 (bevel). See also
<a class="reference internal" href="shapely.geometry.html#shapely.geometry.JOIN_STYLE" title="shapely.geometry.JOIN_STYLE"><tt class="xref py py-data docutils literal"><span class="pre">shapely.geometry.JOIN_STYLE</span></tt></a>.</p>
<p>Severely mitered corners can be controlled by the mitre_limit parameter
(spelled in British English, en-gb). The ratio of the distance from the
corner to the end of the mitred offset corner is the miter ratio. Corners
with a ratio which exceed the limit will be beveled.</p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method is only available for <cite>LinearRing</cite> and <cite>LineString</cite>  objects.</p>
</div>
<p>(<a class="reference external" href="./code/parallel_offset.py">Source code</a>, <a class="reference external" href="./code/parallel_offset.png">png</a>, <a class="reference external" href="./code/parallel_offset.hires.png">hires.png</a>, <a class="reference external" href="./code/parallel_offset.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/parallel_offset.png" src="_images/parallel_offset.png" />
</div>
<p>Figure 11. Three styles of parallel offset lines on the left side of a simple
line string (its starting point shown as a circle) and one offset on the right
side, a multipart.</p>
<p>The effect of the <cite>mitre_limit</cite> parameter is shown below.</p>
<p>(<a class="reference external" href="./code/parallel_offset_mitre.py">Source code</a>, <a class="reference external" href="./code/parallel_offset_mitre.png">png</a>, <a class="reference external" href="./code/parallel_offset_mitre.hires.png">hires.png</a>, <a class="reference external" href="./code/parallel_offset_mitre.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/parallel_offset_mitre.png" src="_images/parallel_offset_mitre.png" />
</div>
<p>Figure 12. Large and small mitre_limit values for left and right offsets.</p>
<dl class="method">
<dt id="object.simplify">
<tt class="descclassname">object.</tt><tt class="descname">simplify</tt><big>(</big><em>tolerance</em>, <em>preserve_topology=True</em><big>)</big><a class="headerlink" href="#object.simplify" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a simplified representation of the geometric object.</p>
</dd></dl>

<p>All points in the simplified object will be within the <cite>tolerance</cite> distance of
the original geometry. By default a slower algorithm is used that preserves
topology. If preserve topology is set to <tt class="docutils literal"><span class="pre">False</span></tt> the much quicker
Douglas-Peucker algorithm <a class="footnote-reference" href="#id27" id="id20">[6]</a> is used.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">area</span>
<span class="go">3.1365484905459389</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">66</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">preserve_topology</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">area</span>
<span class="go">3.0614674589207187</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">17</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./code/simplify.py">Source code</a>, <a class="reference external" href="./code/simplify.png">png</a>, <a class="reference external" href="./code/simplify.hires.png">hires.png</a>, <a class="reference external" href="./code/simplify.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/simplify.png" src="_images/simplify.png" />
</div>
<p>Figure 13. Simplification of a nearly circular polygon using a tolerance of 0.2
(left) and 0.5 (right).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><cite>Invalid</cite> geometric objects may result from simplification that does not
preserve topology.</p>
</div>
</div>
</div>
<div class="section" id="affine-transformations">
<h2>Affine Transformations<a class="headerlink" href="#affine-transformations" title="Permalink to this headline">¶</a></h2>
<p>A collection of affine transform functions are in the <a class="reference internal" href="shapely.html#module-shapely.affinity" title="shapely.affinity"><tt class="xref py py-mod docutils literal"><span class="pre">shapely.affinity</span></tt></a>
module, which return transformed geometries by either directly supplying
coefficients to an affine transformation matrix, or by using a specific, named
transform (<cite>rotate</cite>, <cite>scale</cite>, etc.). The functions can be used with all
geometry types (except <cite>GeometryCollection</cite>), and 3D types are either
preserved or supported by 3D affine transformations.</p>
<p><cite>New in version 1.2.17</cite>.</p>
<dl class="function">
<dt id="shapely.affinity.affine_transform">
<tt class="descclassname">shapely.affinity.</tt><tt class="descname">affine_transform</tt><big>(</big><em>geom</em>, <em>matrix</em><big>)</big><a class="headerlink" href="#shapely.affinity.affine_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a transformed geometry using an affine transformation matrix.</p>
<p>The coefficient <tt class="docutils literal"><span class="pre">matrix</span></tt> is provided as a list or tuple with 6 or 12 items
for 2D or 3D transformations, respectively.</p>
<p>For 2D affine transformations, the 6 parameter <tt class="docutils literal"><span class="pre">matrix</span></tt> is:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">[a,</span> <span class="pre">b,</span> <span class="pre">d,</span> <span class="pre">e,</span> <span class="pre">xoff,</span> <span class="pre">yoff]</span></tt></div></blockquote>
<p>which represents the augmented matrix:</p>
<div class="math">
<p><span class="math">\begin{bmatrix} x' &amp; y' &amp; 1 \end{bmatrix} =
\begin{bmatrix} x  &amp; y  &amp; 1 \end{bmatrix}
\begin{bmatrix}
  a &amp; b &amp; x_\mathrm{off} \\
  d &amp; e &amp; y_\mathrm{off} \\
  0 &amp; 0 &amp; 1
\end{bmatrix}</span></p>
</div><p>or the equations for the transformed coordinates:</p>
<div class="math">
<p><span class="math">x' &amp;= a x + b y + x_\mathrm{off} \\
y' &amp;= d x + e y + y_\mathrm{off}.</span></p>
</div><p>For 3D affine transformations, the 12 parameter <tt class="docutils literal"><span class="pre">matrix</span></tt> is:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">[a,</span> <span class="pre">b,</span> <span class="pre">c,</span> <span class="pre">d,</span> <span class="pre">e,</span> <span class="pre">f,</span> <span class="pre">g,</span> <span class="pre">h,</span> <span class="pre">i,</span> <span class="pre">xoff,</span> <span class="pre">yoff,</span> <span class="pre">zoff]</span></tt></div></blockquote>
<p>which represents the augmented matrix:</p>
<div class="math">
<p><span class="math">\begin{bmatrix} x' &amp; y' &amp; z' &amp; 1 \end{bmatrix} =
\begin{bmatrix} x  &amp; y  &amp; z  &amp; 1 \end{bmatrix}
\begin{bmatrix}
  a &amp; b &amp; c &amp; x_\mathrm{off} \\
  d &amp; e &amp; f &amp; y_\mathrm{off} \\
  g &amp; h &amp; i &amp; z_\mathrm{off} \\
  0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}</span></p>
</div><p>or the equations for the transformed coordinates:</p>
<div class="math">
<p><span class="math">x' &amp;= a x + b y + c z + x_\mathrm{off} \\
y' &amp;= d x + e y + f z + y_\mathrm{off} \\
z' &amp;= g x + h y + i z + z_\mathrm{off}.</span></p>
</div></dd></dl>

<dl class="function">
<dt id="shapely.affinity.rotate">
<tt class="descclassname">shapely.affinity.</tt><tt class="descname">rotate</tt><big>(</big><em>geom</em>, <em>angle</em>, <em>origin='center'</em>, <em>use_radians=False</em><big>)</big><a class="headerlink" href="#shapely.affinity.rotate" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a rotated geometry on a 2D plane.</p>
<p>The angle of rotation can be specified in either degrees (default) or
radians by setting <tt class="docutils literal"><span class="pre">use_radians=True</span></tt>. Positive angles are
counter-clockwise and negative are clockwise rotations.</p>
<p>The point of origin can be a keyword <tt class="docutils literal"><span class="pre">'center'</span></tt> for the bounding box
center (default), <tt class="docutils literal"><span class="pre">'centroid'</span></tt> for the geometry&#8217;s centroid, a <cite>Point</cite> object
or a coordinate tuple <tt class="docutils literal"><span class="pre">(x0,</span> <span class="pre">y0)</span></tt>.</p>
<p>The affine transformation matrix for 2D rotation with angle <span class="math">\theta</span> is:</p>
<div class="math">
<p><span class="math">\begin{bmatrix}
  \cos{\theta} &amp; -\sin{\theta} &amp; x_\mathrm{off} \\
  \sin{\theta} &amp;  \cos{\theta} &amp; y_\mathrm{off} \\
        0      &amp;        0      &amp; 1
\end{bmatrix}</span></p>
</div><p>where the offsets are calculated from the origin <span class="math">(x_0, y_0)</span>:</p>
<div class="math">
<p><span class="math">x_\mathrm{off} &amp;= x_0 - x_0 \cos{\theta} + y_0 \sin{\theta} \\
y_\mathrm{off} &amp;= y_0 - x_0 \sin{\theta} - y_0 \cos{\theta}</span></p>
</div><div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely</span> <span class="kn">import</span> <span class="n">affinity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotated_a</span> <span class="o">=</span> <span class="n">affinity</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="mi">90</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotated_b</span> <span class="o">=</span> <span class="n">affinity</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s">&#39;centroid&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./code/rotate.py">Source code</a>, <a class="reference external" href="./code/rotate.png">png</a>, <a class="reference external" href="./code/rotate.hires.png">hires.png</a>, <a class="reference external" href="./code/rotate.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/rotate.png" src="_images/rotate.png" />
</div>
<p>Figure 14. Rotation of a <cite>LineString</cite> (gray) by an angle of 90°
counter-clockwise (blue) using different origins.</p>
</dd></dl>

<dl class="function">
<dt id="shapely.affinity.scale">
<tt class="descclassname">shapely.affinity.</tt><tt class="descname">scale</tt><big>(</big><em>geom</em>, <em>xfact=1.0</em>, <em>yfact=1.0</em>, <em>zfact=1.0</em>, <em>origin='center'</em><big>)</big><a class="headerlink" href="#shapely.affinity.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a scaled geometry, scaled by factors along each dimension.</p>
<p>The point of origin can be a keyword <tt class="docutils literal"><span class="pre">'center'</span></tt> for the 2D bounding box
center (default), <tt class="docutils literal"><span class="pre">'centroid'</span></tt> for the geometry&#8217;s 2D centroid, a <cite>Point</cite>
object or a coordinate tuple <tt class="docutils literal"><span class="pre">(x0,</span> <span class="pre">y0,</span> <span class="pre">z0)</span></tt>.</p>
<p>Negative scale factors will mirror or reflect coordinates.</p>
<p>The general 3D affine transformation matrix for scaling is:</p>
<div class="math">
<p><span class="math">\begin{bmatrix}
  x_\mathrm{fact} &amp; 0               &amp; 0               &amp; x_\mathrm{off} \\
  0               &amp; y_\mathrm{fact} &amp; 0               &amp; y_\mathrm{off} \\
  0               &amp; 0               &amp; z_\mathrm{fact} &amp; z_\mathrm{off} \\
  0               &amp; 0               &amp; 0               &amp; 1
\end{bmatrix}</span></p>
</div><p>where the offsets are calculated from the origin <span class="math">(x_0, y_0, z_0)</span>:</p>
<div class="math">
<p><span class="math">x_\mathrm{off} &amp;= x_0 - x_0 x_\mathrm{fact} \\
y_\mathrm{off} &amp;= y_0 - y_0 y_\mathrm{fact} \\
z_\mathrm{off} &amp;= z_0 - z_0 z_\mathrm{fact}</span></p>
</div><div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">triangle</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">triangle_a</span> <span class="o">=</span> <span class="n">affinity</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">triangle</span><span class="p">,</span> <span class="n">xfact</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">yfact</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">triangle_a</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">[:]</span>
<span class="go">[(0.5, 3.0), (2.0, 1.0), (3.5, 3.0), (0.5, 3.0)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">triangle_b</span> <span class="o">=</span> <span class="n">affinity</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">triangle</span><span class="p">,</span> <span class="n">xfact</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">triangle_b</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">[:]</span>
<span class="go">[(1.0, 1.0), (3.0, 3.0), (5.0, 1.0), (1.0, 1.0)]</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./code/scale.py">Source code</a>, <a class="reference external" href="./code/scale.png">png</a>, <a class="reference external" href="./code/scale.hires.png">hires.png</a>, <a class="reference external" href="./code/scale.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/scale.png" src="_images/scale.png" />
</div>
<p>Figure 15. Scaling of a gray triangle to blue result: a) by a factor of 1.5
along x-direction, with reflection across y-axis; b) by a factor of 2 along
x-direction with custom origin at (1, 1).</p>
</dd></dl>

<dl class="function">
<dt id="shapely.affinity.skew">
<tt class="descclassname">shapely.affinity.</tt><tt class="descname">skew</tt><big>(</big><em>geom</em>, <em>xs=0.0</em>, <em>ys=0.0</em>, <em>origin='center'</em>, <em>use_radians=False</em><big>)</big><a class="headerlink" href="#shapely.affinity.skew" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a skewed geometry, sheared by angles along x and y dimensions.</p>
<p>The shear angle can be specified in either degrees (default) or radians
by setting <tt class="docutils literal"><span class="pre">use_radians=True</span></tt>.</p>
<p>The point of origin can be a keyword <tt class="docutils literal"><span class="pre">'center'</span></tt> for the bounding box
center (default), <tt class="docutils literal"><span class="pre">'centroid'</span></tt> for the geometry&#8217;s centroid, a <cite>Point</cite>
object or a coordinate tuple <tt class="docutils literal"><span class="pre">(x0,</span> <span class="pre">y0)</span></tt>.</p>
<p>The general 2D affine transformation matrix for skewing is:</p>
<div class="math">
<p><span class="math">\begin{bmatrix}
  1 &amp; \tan{x_s} &amp; x_\mathrm{off} \\
  \tan{y_s} &amp; 1 &amp; y_\mathrm{off} \\
  0 &amp; 0 &amp; 1
\end{bmatrix}</span></p>
</div><p>where the offsets are calculated from the origin <span class="math">(x_0, y_0)</span>:</p>
<div class="math">
<p><span class="math">x_\mathrm{off} &amp;= -y_0 \tan{x_s} \\
y_\mathrm{off} &amp;= -x_0 \tan{y_s}</span></p>
</div><p>(<a class="reference external" href="./code/skew.py">Source code</a>, <a class="reference external" href="./code/skew.png">png</a>, <a class="reference external" href="./code/skew.hires.png">hires.png</a>, <a class="reference external" href="./code/skew.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/skew.png" src="_images/skew.png" />
</div>
<p>Figure 16. Skewing of a gray &#8220;R&#8221; to blue result: a) by a shear angle of 20°
along the x-direction and an origin at (1, 1); b) by a shear angle of 30°
along the y-direction, using default origin.</p>
</dd></dl>

<dl class="function">
<dt id="shapely.affinity.translate">
<tt class="descclassname">shapely.affinity.</tt><tt class="descname">translate</tt><big>(</big><em>geom</em>, <em>xoff=0.0</em>, <em>yoff=0.0</em>, <em>zoff=0.0</em><big>)</big><a class="headerlink" href="#shapely.affinity.translate" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a translated geometry shifted by offsets along each dimension.</p>
<p>The general 3D affine transformation matrix for translation is:</p>
<div class="math">
<p><span class="math">\begin{bmatrix}
  1 &amp; 0 &amp; 0 &amp; x_\mathrm{off} \\
  0 &amp; 1 &amp; 0 &amp; y_\mathrm{off} \\
  0 &amp; 0 &amp; 1 &amp; z_\mathrm{off} \\
  0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}</span></p>
</div></dd></dl>

</div>
<div class="section" id="other-transformations">
<h2>Other Transformations<a class="headerlink" href="#other-transformations" title="Permalink to this headline">¶</a></h2>
<p>Shapely supports map projections and other arbitrary transformations of geometric objects.</p>
<dl class="function">
<dt id="shapely.ops.transform">
<tt class="descclassname">shapely.ops.</tt><tt class="descname">transform</tt><big>(</big><em>func</em>, <em>geom</em><big>)</big><a class="headerlink" href="#shapely.ops.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies <cite>func</cite> to all coordinates of <cite>geom</cite> and returns a new
geometry of the same type from the transformed coordinates.</p>
<p><cite>func</cite> maps x, y, and optionally z to output xp, yp, zp. The input
parameters may iterable types like lists or arrays or single values.
The output shall be of the same type: scalars in, scalars out;
lists in, lists out.</p>
<p><cite>New in version 1.2.18</cite>.</p>
</dd></dl>

<p>For example, here is an identity function applicable to both types of input
(scalar or array).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">id_func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]))</span>

<span class="n">g2</span> <span class="o">=</span> <span class="n">transform</span><span class="p">(</span><span class="n">id_func</span><span class="p">,</span> <span class="n">g1</span><span class="p">)</span>
</pre></div>
</div>
<p>A partially applied transform function from pyproj satisfies the requirements
for <cite>func</cite>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">import</span> <span class="nn">pyproj</span>

<span class="n">project</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
    <span class="n">pyproj</span><span class="o">.</span><span class="n">transform</span><span class="p">,</span>
    <span class="n">pyproj</span><span class="o">.</span><span class="n">Proj</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="s">&#39;espg:4326&#39;</span><span class="p">),</span>
    <span class="n">pyproj</span><span class="o">.</span><span class="n">Proj</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="s">&#39;epsg:26913&#39;</span><span class="p">))</span>

<span class="n">g2</span> <span class="o">=</span> <span class="n">transform</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">g1</span><span class="p">)</span>
</pre></div>
</div>
<p>Lambda expressions such as the one in</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">g2</span> <span class="o">=</span> <span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="bp">None</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">+</span><span class="mf">1.0</span><span class="p">),</span> <span class="n">g1</span><span class="p">)</span>
</pre></div>
</div>
<p>also satisfy the requirements for <cite>func</cite>.</p>
</div>
<div class="section" id="other-operations">
<h2>Other Operations<a class="headerlink" href="#other-operations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="merging-linear-features">
<h3>Merging Linear Features<a class="headerlink" href="#merging-linear-features" title="Permalink to this headline">¶</a></h3>
<p>Sequences of touching lines can be merged into <cite>MultiLineStrings</cite> or <cite>Polygons</cite>
using functions in the <a class="reference internal" href="shapely.html#module-shapely.ops" title="shapely.ops"><tt class="xref py py-mod docutils literal"><span class="pre">shapely.ops</span></tt></a> module.</p>
<dl class="function">
<dt id="shapely.ops.polygonize">
<tt class="descclassname">shapely.ops.</tt><tt class="descname">polygonize</tt><big>(</big><em>lines</em><big>)</big><a class="headerlink" href="#shapely.ops.polygonize" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator over polygons constructed from the input <cite>lines</cite>.</p>
<p>As with the <a class="reference internal" href="#MultiLineString" title="MultiLineString"><tt class="xref py py-class docutils literal"><span class="pre">MultiLineString</span></tt></a> constructor, the input elements may be
any line-like object.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.ops</span> <span class="kn">import</span> <span class="n">polygonize</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">polygonize</span><span class="p">(</span><span class="n">lines</span><span class="p">)))</span>
<span class="go">[&lt;shapely.geometry.polygon.Polygon object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.polygon.Polygon object at 0x...&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="shapely.ops.polygonize_full">
<tt class="descclassname">shapely.ops.</tt><tt class="descname">polygonize_full</tt><big>(</big><em>lines</em><big>)</big><a class="headerlink" href="#shapely.ops.polygonize_full" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates polygons from a source of lines, returning the polygons
and leftover geometries.</p>
<p>The source may be a MultiLineString, a sequence of LineString objects,
or a sequence of objects than can be adapted to LineStrings.</p>
<p>Returns a tuple of objects: (polygons, dangles, cut edges, invalid ring
lines). Each are a geometry collection.</p>
<p>Dangles are edges which have one or both ends which are not incident on
another edge endpoint. Cut edges are connected at both ends but do not
form part of polygon. Invalid ring lines form rings which are invalid
(bowties, etc).</p>
<p><cite>New in version 1.2.18.</cite></p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="p">,</span> <span class="n">dangles</span><span class="p">,</span> <span class="n">cuts</span><span class="p">,</span> <span class="n">invalids</span> <span class="o">=</span> <span class="n">polygonize_full</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">geoms</span><span class="p">)</span>
<span class="go">[&lt;shapely.geometry.polygon.Polygon object at ...&gt;, &lt;shapely.geometry.polygon.Polygon object at ...&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">cuts</span><span class="o">.</span><span class="n">geoms</span><span class="p">)</span>
<span class="go">[&lt;shapely.geometry.linestring.LineString object at ...&gt;, &lt;shapely.geometry.linestring.LineString object at ...&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="shapely.ops.linemerge">
<tt class="descclassname">shapely.ops.</tt><tt class="descname">linemerge</tt><big>(</big><em>lines</em><big>)</big><a class="headerlink" href="#shapely.ops.linemerge" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <cite>LineString</cite> or <cite>MultiLineString</cite> representing the merger of all
contiguous elements of <cite>lines</cite>.</p>
<p>As with <a class="reference internal" href="#shapely.ops.polygonize" title="shapely.ops.polygonize"><tt class="xref py py-func docutils literal"><span class="pre">shapely.ops.polygonize()</span></tt></a>, the input elements may be any
line-like object.</p>
</dd></dl>

<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.ops</span> <span class="kn">import</span> <span class="n">linemerge</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linemerge</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
<span class="go">&lt;shapely.geometry.multilinestring.MultiLineString object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">linemerge</span><span class="p">(</span><span class="n">lines</span><span class="p">)))</span>
<span class="go">[&lt;shapely.geometry.linestring.LineString object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.linestring.LineString object at 0x...&gt;,</span>
<span class="go"> &lt;shapely.geometry.linestring.LineString object at 0x...&gt;]</span>
</pre></div>
</div>
</div>
<div class="section" id="cascading-unions">
<h3>Cascading Unions<a class="headerlink" href="#cascading-unions" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#shapely.ops.cascaded_union" title="shapely.ops.cascaded_union"><tt class="xref py py-func docutils literal"><span class="pre">cascaded_union()</span></tt></a> function in <cite>shapely.ops</cite> is more
efficient than accumulating with <a class="reference internal" href="#object.union" title="object.union"><tt class="xref py py-meth docutils literal"><span class="pre">union()</span></tt></a>.</p>
<p>(<a class="reference external" href="./code/cascaded_union.py">Source code</a>, <a class="reference external" href="./code/cascaded_union.png">png</a>, <a class="reference external" href="./code/cascaded_union.hires.png">hires.png</a>, <a class="reference external" href="./code/cascaded_union.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/cascaded_union.png" src="_images/cascaded_union.png" />
</div>
<dl class="function">
<dt id="shapely.ops.cascaded_union">
<tt class="descclassname">shapely.ops.</tt><tt class="descname">cascaded_union</tt><big>(</big><em>geoms</em><big>)</big><a class="headerlink" href="#shapely.ops.cascaded_union" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a representation of the union of the given geometric objects.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.ops</span> <span class="kn">import</span> <span class="n">cascaded_union</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">polygons</span> <span class="o">=</span> <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">0.7</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cascaded_union</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span>
<span class="go">&lt;shapely.geometry.polygon.Polygon object at 0x...&gt;</span>
</pre></div>
</div>
<p>The function is particularly useful in dissolving <cite>MultiPolygons</cite>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">MultiPolygon</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">area</span>
<span class="go">7.6845438018375516</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cascaded_union</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">.</span><span class="n">area</span>
<span class="go">6.6103013551167971</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In 1.2.16 <a class="reference internal" href="#shapely.ops.cascaded_union" title="shapely.ops.cascaded_union"><tt class="xref py py-func docutils literal"><span class="pre">shapely.ops.cascaded_union()</span></tt></a> is superceded by
<a class="reference internal" href="#shapely.ops.unary_union" title="shapely.ops.unary_union"><tt class="xref py py-func docutils literal"><span class="pre">shapely.ops.unary_union()</span></tt></a> if GEOS 3.2+ is used. The unary union
function can operate on different geometry types, not only polygons as is
the case for the older cascaded unions.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="shapely.ops.unary_union">
<tt class="descclassname">shapely.ops.</tt><tt class="descname">unary_union</tt><big>(</big><em>geoms</em><big>)</big><a class="headerlink" href="#shapely.ops.unary_union" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a representation of the union of the given geometric objects.</p>
</dd></dl>

</div>
<div class="section" id="prepared-geometry-operations">
<h3>Prepared Geometry Operations<a class="headerlink" href="#prepared-geometry-operations" title="Permalink to this headline">¶</a></h3>
<p>Shapely geometries can be processed into a state that supports more efficient
batches of operations.</p>
<dl class="function">
<dt id="prepared.prep">
<tt class="descclassname">prepared.</tt><tt class="descname">prep</tt><big>(</big><em>ob</em><big>)</big><a class="headerlink" href="#prepared.prep" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and returns a prepared geometric object.</p>
</dd></dl>

<p>To test one polygon containment against a large batch of points, one should
first use the <a class="reference internal" href="#prepared.prep" title="prepared.prep"><tt class="xref py py-func docutils literal"><span class="pre">prepared.prep()</span></tt></a> function.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Point</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.prepared</span> <span class="kn">import</span> <span class="n">prep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="c"># large list of points</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">polygon</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prepared_polygon</span> <span class="o">=</span> <span class="n">prep</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prepared_polygon</span>
<span class="go">&lt;shapely.prepared.PreparedGeometry object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hits</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">prepared_polygon</span><span class="o">.</span><span class="n">contains</span><span class="p">,</span> <span class="n">points</span><span class="p">)</span>
</pre></div>
</div>
<p>Prepared geometries instances have the following methods: <tt class="docutils literal"><span class="pre">contains</span></tt>,
<tt class="docutils literal"><span class="pre">contains_properly</span></tt>, <tt class="docutils literal"><span class="pre">covers</span></tt>, and <tt class="docutils literal"><span class="pre">intersects</span></tt>. All have exactly the
same arguments and usage as their counterparts in non-prepared geometric
objects.</p>
</div>
<div class="section" id="diagnostics">
<h3>Diagnostics<a class="headerlink" href="#diagnostics" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt>
<tt class="descname">validation.explain_validity(ob):</tt></dt>
<dd><p>Returns a string explaining the validity or invalidity of the object.</p>
<p><cite>New in version 1.2.1</cite>.</p>
</dd></dl>

<p>The messages may or may not have a representation of a problem point that can
be parsed out.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.validation</span> <span class="kn">import</span> <span class="n">explain_validity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">explain_validity</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="go">&#39;Ring Self-intersection[1 1]&#39;</span>
</pre></div>
</div>
<p>The Shapely version, GEOS library version, and GEOS C API version are
accessible via <tt class="xref py py-attr docutils literal"><span class="pre">shapely.__version__</span></tt>,
<tt class="xref py py-attr docutils literal"><span class="pre">shapely.geos.geos_version_string</span></tt>, and
<tt class="xref py py-attr docutils literal"><span class="pre">shapely.geos.geos_capi_version</span></tt>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shapely</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shapely</span><span class="o">.</span><span class="n">__version__</span>
<span class="go">&#39;1.3.0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shapely.geos</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shapely</span><span class="o">.</span><span class="n">geos</span><span class="o">.</span><span class="n">geos_version</span>
<span class="go">(3, 3, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shapely</span><span class="o">.</span><span class="n">geos</span><span class="o">.</span><span class="n">geos_version_string</span>
<span class="go">&#39;3.3.0-CAPI-1.7.0&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="interoperation">
<h2>Interoperation<a class="headerlink" href="#interoperation" title="Permalink to this headline">¶</a></h2>
<p>Shapely provides 4 avenues for interoperation with other software.</p>
<div class="section" id="well-known-formats">
<h3>Well-Known Formats<a class="headerlink" href="#well-known-formats" title="Permalink to this headline">¶</a></h3>
<p>A <cite>Well Known Text</cite> (WKT) or <cite>Well Known Binary</cite> (WKB) representation <a class="footnote-reference" href="#id22" id="id21">[1]</a> of
any geometric object can be had via its <tt class="xref py py-attr docutils literal"><span class="pre">wkt</span></tt> or <tt class="xref py py-attr docutils literal"><span class="pre">wkb</span></tt> attribute.
These representations allow interchange with many GIS programs. PostGIS, for
example, trades in hex-encoded WKB.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;POINT (0.0000000000000000 0.0000000000000000)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">wkb</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;hex&#39;</span><span class="p">)</span>
<span class="go">&#39;010100000000000000000000000000000000000000&#39;</span>
</pre></div>
</div>
<p>The <cite>shapely.wkt</cite> and <cite>shapely.wkb</cite> modules provide <cite>dumps()</cite> and <cite>loads()</cite>
functions that work almost exactly as their <cite>pickle</cite> and <cite>simplejson</cite> module
counterparts. To serialize a geometric object to a binary or text string, use
<tt class="docutils literal"><span class="pre">dumps()</span></tt>. To deserialize a string and get a new geometric object of the
appropriate type, use <tt class="docutils literal"><span class="pre">loads()</span></tt>.</p>
<dl class="function">
<dt id="shapely.wkb.dumps">
<tt class="descclassname">shapely.wkb.</tt><tt class="descname">dumps</tt><big>(</big><em>ob</em><big>)</big><a class="headerlink" href="#shapely.wkb.dumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a WKB representation of <cite>ob</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="shapely.wkb.loads">
<tt class="descclassname">shapely.wkb.</tt><tt class="descname">loads</tt><big>(</big><em>wkb</em><big>)</big><a class="headerlink" href="#shapely.wkb.loads" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a geometric object from a WKB representation <cite>wkb</cite>.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="go">&gt;&gt; from shapely.wkb import dumps, loads</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wkb</span> <span class="o">=</span> <span class="n">dumps</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">wkb</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;hex&#39;</span><span class="p">)</span>
<span class="go">010100000000000000000000000000000000000000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loads</span><span class="p">(</span><span class="n">wkb</span><span class="p">)</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;POINT (0.0000000000000000 0.0000000000000000)&#39;</span>
</pre></div>
</div>
<p>All of Shapely&#8217;s geometry types are supported by these functions.</p>
<dl class="function">
<dt id="shapely.wkt.dumps">
<tt class="descclassname">shapely.wkt.</tt><tt class="descname">dumps</tt><big>(</big><em>ob</em><big>)</big><a class="headerlink" href="#shapely.wkt.dumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a WKT representation of <cite>ob</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="shapely.wkt.loads">
<tt class="descclassname">shapely.wkt.</tt><tt class="descname">loads</tt><big>(</big><em>wkt</em><big>)</big><a class="headerlink" href="#shapely.wkt.loads" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a geometric object from a WKT representation <cite>wkt</cite>.</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="go">&gt;&gt; wkt = dumps(Point(0, 0))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">wkt</span>
<span class="go">POINT (0.0000000000000000 0.0000000000000000)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loads</span><span class="p">(</span><span class="n">wkt</span><span class="p">)</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;POINT (0.0000000000000000 0.0000000000000000)&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="numpy-and-python-arrays">
<h3>Numpy and Python Arrays<a class="headerlink" href="#numpy-and-python-arrays" title="Permalink to this headline">¶</a></h3>
<p>All geometric objects with coordinate sequences (<cite>Point</cite>, <cite>LinearRing</cite>,
<cite>LineString</cite>) provide the Numpy array interface and can thereby be converted or
adapted to Numpy arrays.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">array</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="go">array([ 0.,  0.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">array</span><span class="p">(</span><span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]))</span>
<span class="go">array([[ 0.,  0.],</span>
<span class="go">       [ 1.,  1.]])</span>
</pre></div>
</div>
<p>The <tt class="xref py py-func docutils literal"><span class="pre">numpy.asarray()</span></tt> function does not copy coordinate values – at the
price of slower Numpy access to the coordinates of Shapely objects.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Numpy array interface is provided without a dependency on Numpy itself.</p>
</div>
<p>The coordinates of the same types of geometric objects can be had as standard
Python arrays of <cite>x</cite> and <cite>y</cite> values via the <tt class="xref py py-attr docutils literal"><span class="pre">xy</span></tt> attribute.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">xy</span>
<span class="go">(array(&#39;d&#39;, [0.0]), array(&#39;d&#39;, [0.0]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span><span class="o">.</span><span class="n">xy</span>
<span class="go">(array(&#39;d&#39;, [0.0, 1.0]), array(&#39;d&#39;, [0.0, 1.0]))</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="shapely.geometry.html#shapely.geometry.asShape" title="shapely.geometry.asShape"><tt class="xref py py-func docutils literal"><span class="pre">shapely.geometry.asShape()</span></tt></a> family of functions can be used to wrap
Numpy coordinate arrays so that they can then be analyzed using Shapely while
maintaining their original storage. A 1 x 2 array can be adapted to a point</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">asPoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pa</span> <span class="o">=</span> <span class="n">asPoint</span><span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pa</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;POINT (0.0000000000000000 0.0000000000000000)&#39;</span>
</pre></div>
</div>
<p>and a N x 2 array can be adapted to a line string</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">asLineString</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">la</span> <span class="o">=</span> <span class="n">asLineString</span><span class="p">(</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">la</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;LINESTRING (1.0000000000000000 2.0000000000000000, 3.0000000000000000 4.0000000000000000)&#39;</span>
</pre></div>
</div>
<p>There is no Numpy array representation of a polygon.</p>
</div>
<div class="section" id="python-geo-interface">
<h3>Python Geo Interface<a class="headerlink" href="#python-geo-interface" title="Permalink to this headline">¶</a></h3>
<p>Any object that provides the GeoJSON-like <a class="reference external" href="http://gist.github.com/2217756">Python geo interface</a> can be
adapted and used as a Shapely geometry using the
<a class="reference internal" href="shapely.geometry.html#shapely.geometry.asShape" title="shapely.geometry.asShape"><tt class="xref py py-func docutils literal"><span class="pre">shapely.geometry.asShape()</span></tt></a> or <a class="reference internal" href="shapely.geometry.html#shapely.geometry.shape" title="shapely.geometry.shape"><tt class="xref py py-func docutils literal"><span class="pre">shapely.geometry.shape()</span></tt></a> functions.</p>
<dl class="function">
<dt id="shapely.geometry.asShape">
<tt class="descclassname">shapely.geometry.</tt><tt class="descname">asShape</tt><big>(</big><em>context</em><big>)</big><a class="headerlink" href="#shapely.geometry.asShape" title="Permalink to this definition">¶</a></dt>
<dd><p>Adapts the context to a geometry interface. The coordinates remain stored in
the context.</p>
</dd></dl>

<dl class="function">
<dt id="shapely.geometry.shape">
<tt class="descclassname">shapely.geometry.</tt><tt class="descname">shape</tt><big>(</big><em>context</em><big>)</big><a class="headerlink" href="#shapely.geometry.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new, independent geometry with coordinates <cite>copied</cite> from the
context.</p>
</dd></dl>

<p>For example, a dictionary:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">asShape</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;Point&quot;</span><span class="p">,</span> <span class="s">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shape</span> <span class="o">=</span> <span class="n">asShape</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shape</span><span class="o">.</span><span class="n">geom_type</span>
<span class="go">&#39;Point&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[(0.0, 0.0)]</span>
</pre></div>
</div>
<p>Or a simple placemark-type object:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">GeoThing</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">__geo_interface__</span> <span class="o">=</span> <span class="n">d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">thing</span> <span class="o">=</span> <span class="n">GeoThing</span><span class="p">({</span><span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;Point&quot;</span><span class="p">,</span> <span class="s">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shape</span> <span class="o">=</span> <span class="n">asShape</span><span class="p">(</span><span class="n">thing</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shape</span><span class="o">.</span><span class="n">geom_type</span>
<span class="go">&#39;Point&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[(0.0, 0.0)]</span>
</pre></div>
</div>
<p>The GeoJSON-like mapping of a geometric object can be obtained using
<a class="reference internal" href="shapely.geometry.html#shapely.geometry.mapping" title="shapely.geometry.mapping"><tt class="xref py py-func docutils literal"><span class="pre">shapely.geometry.mapping()</span></tt></a>.</p>
<dl class="function">
<dt id="shapely.geometry.mapping">
<tt class="descclassname">shapely.geometry.</tt><tt class="descname">mapping</tt><big>(</big><em>ob</em><big>)</big><a class="headerlink" href="#shapely.geometry.mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new, independent geometry with coordinates <cite>copied</cite> from the
context.</p>
<p><cite>New in version 1.2.3</cite>.</p>
<p>For example, using the same <cite>GeoThing</cite> class:</p>
</dd></dl>

<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">mapping</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">thing</span> <span class="o">=</span> <span class="n">GeoThing</span><span class="p">({</span><span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;Point&quot;</span><span class="p">,</span> <span class="s">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">mapping</span><span class="p">(</span><span class="n">thing</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span>
<span class="go">&#39;Point&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="s">&#39;coordinates&#39;</span><span class="p">]</span>
<span class="go">(0.0, 0.0)}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="performance">
<h2>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h2>
<p>Shapely uses the <a class="reference external" href="http://trac.osgeo.org/geos/">GEOS</a> library for all operations. GEOS is written in C++ and
used in many applications and you can expect that all operations are highly
optimized. The creation of new geometries with many coordinates, however,
involves some overhead that might slow down your code.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.2.10.</span></p>
</div>
<p>The <a class="reference internal" href="shapely.speedups.html#module-shapely.speedups" title="shapely.speedups"><tt class="xref py py-mod docutils literal"><span class="pre">shapely.speedups</span></tt></a> module contains performance enhancements written in
C. They are automaticaly installed when Python has access to a compiler and
GEOS development headers during installation.</p>
<p>You can check if the speedups are installed with the <tt class="xref py py-attr docutils literal"><span class="pre">available</span></tt>
attribute. The constructor speedups are disabled by default. To enable the
speedups call <tt class="xref py py-func docutils literal"><span class="pre">enable()</span></tt>. You can revert to the default implementation with
<tt class="xref py py-func docutils literal"><span class="pre">disable()</span></tt>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shapely</span> <span class="kn">import</span> <span class="n">speedups</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speedups</span><span class="o">.</span><span class="n">available</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speedups</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>We hope that you will enjoy and profit from using Shapely. Questions and
comments are welcome on the GIS-Python email <a class="reference external" href="http://lists.gispython.org/mailman/listinfo/community">list</a>. This manual will be updated
and improved regularly. Its source is available at
<a class="reference external" href="http://github.com/Toblerity/Shapely/tree/master/docs/">http://github.com/Toblerity/Shapely/tree/master/docs/</a>.</p>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<table class="docutils footnote" frame="void" id="id22" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id2">1</a>, <a class="fn-backref" href="#id7">2</a>, <a class="fn-backref" href="#id13">3</a>, <a class="fn-backref" href="#id15">4</a>, <a class="fn-backref" href="#id21">5</a>)</em> John R. Herring, Ed.,
“OpenGIS Implementation Specification for Geographic information - Simple
feature access - Part 1: Common architecture,” Oct. 2006.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id23" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id3">1</a>, <a class="fn-backref" href="#id4">2</a>)</em> M.J. Egenhofer and John R. Herring,
Categorizing Binary Topological Relations Between Regions, Lines, and Points
in Geographic Databases,  Orono, ME: University of Maine, 1991.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id24" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td>E. Clementini, P. Di Felice, and P. van Oosterom,
“A Small Set of Formal Topological Relationships Suitable for End-User
Interaction,” Third International Symposium on Large Spatial Databases
(SSD). Lecture Notes in Computer Science no. 692, David Abel and Beng Chin
Ooi, Eds.,  Singapore: Springer Verlag, 1993, pp. 277-295.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id25" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[4]</td><td><em>(<a class="fn-backref" href="#id5">1</a>, <a class="fn-backref" href="#id17">2</a>, <a class="fn-backref" href="#id18">3</a>)</em> C. Strobl, “Dimensionally Extended Nine-Intersection Model (DE-9IM),”
Encyclopedia of GIS, S. Shekhar and H. Xiong, Eds.,
Springer, 2008, pp. 240-245. [<a class="reference external" href="http://giswiki.hsr.ch/images/3/3d/9dem_springer.pdf">PDF</a>]</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id26" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[5]</a></td><td>Martin Davis, “JTS Technical Specifications,” Mar. 2003. [<a class="reference external" href="http://www.vividsolutions.com/jts/bin/JTS%20Technical%20Specs.pdf">PDF</a>]</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id27" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id20">[6]</a></td><td>David H. Douglas and Thomas K. Peucker,
“Algorithms for the Reduction of the Number of Points Required to Represent
a Digitized Line or its Caricature,” Cartographica: The International
Journal for Geographic Information and Geovisualization,  vol. 10, Dec.
1973, pp. 112-122.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="modules.html" title="shapely"
             >next</a> |</li>
        <li class="right" >
          <a href="project.html" title="Shapely"
             >previous</a> |</li>
        <li><a href="index.html">Shapely 1.2 and 1.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011-2013, Sean Gillies, Aron Bierbaum, Kai Lautaportti and others.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>